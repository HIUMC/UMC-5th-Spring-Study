# ğŸ¾ğŸ¾ê°ì²´ ì§€í–¥ ì„¤ê³„ì™€ ìŠ¤í”„ë§ğŸ¾ğŸ¾

# ìŠ¤í”„ë§ì´ë€?

## ìŠ¤í”„ë§ ìƒíƒœê³„

**ìŠ¤í”„ë§** : ì—¬ëŸ¬ ê°€ì§€ ê¸°ìˆ ë“¤ì˜ ëª¨ìŒ

- í•„ìˆ˜ : *ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬, ìŠ¤í”„ë§ ë¶€íŠ¸
- ì„ íƒ : ìŠ¤í”„ë§ ë°ì´í„°, ìŠ¤í”„ë§ ì„¸ì…˜, ìŠ¤í”„ë§ ì‹œíë¦¬í‹°, ìŠ¤í”„ë§ Rest Docs, ìŠ¤í”„ë§ ë°°ì¹˜, ìŠ¤í”„ë§ í´ë¼ìš°ë“œ

ê´€ë ¨ ìë£Œ ê²€ìƒ‰ : [spring.io](http://spring.io) â†’ Projects â†’ Overview

## â­â­â­ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬

- **í•µì‹¬ ê¸°ìˆ ** : ìŠ¤í”„ë§ DI ì»¨í…Œì´ë„ˆ, AOP, ì´ë²¤íŠ¸, ê¸°íƒ€
- ì›¹ ê¸°ìˆ  : ìŠ¤í”„ë§ MVC, ìŠ¤í”„ë§ WebFlux
- ë°ì´í„° ì ‘ê·¼ ê¸°ìˆ  : íŠ¸ëœì­ì…˜, JDBC, ORM ì§€ì›, XML ì§€ì›
- ê¸°ìˆ  í†µí•© : ìºì‹œ, ì´ë©”ì¼, ì›ê²©ì ‘ê·¼, ìŠ¤ì¼€ì¤„ë§
- í…ŒìŠ¤íŠ¸ : ìŠ¤í”„ë§ ê¸°ë°˜ í…ŒìŠ¤íŠ¸ ì§€ì›
- ì–¸ì–´ : ì½”í‹€ë¦°, ê·¸ë£¨ë¹„
- ìµœê·¼ì—ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ í†µí•´ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì˜ ê¸°ìˆ ë“¤ì„ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©

## ìŠ¤í”„ë§ ë¶€íŠ¸

- ìŠ¤í”„ë§ì„ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›, ìµœê·¼ì—ëŠ” ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©
- ë‹¨ë…ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‰½ê²Œ ìƒì„±
- Tomcat ê°™ì€ ì›¹ ì„œë²„ë¥¼ ë‚´ì¥í•´ì„œ ë³„ë„ì˜ ì›¹ ì„œë²„ë¥¼ ì„¤ì¹˜í•˜ì§€ ì•Šì•„ë„ ë¨
- ì†ì‰¬ìš´ ë¹Œë“œ êµ¬ì„±ì„ ìœ„í•œ starter ì¢…ì†ì„± ì œê³µ
- ìŠ¤í”„ë§ê³¼ 3rd parth(ì™¸ë¶€) ë¼ì´ë¸ŒëŸ¬ë¦¬ ìë™ êµ¬ì„±
- ë©”íŠ¸ë¦­, ìƒíƒœ í™•ì¸, ì™¸ë¶€ êµ¬ì„± ê°™ì€ í”„ë¡œë•ì…˜ ì¤€ë¹„ ê¸°ëŠ¥ ì œê³µ (ëª¨ë‹ˆí„°ë§)
- ê´€ë¡€ì— ì˜í•œ ê°„ê²°í•œ ì„¤ì •

## ìŠ¤í”„ë§ ë‹¨ì–´?

- ìŠ¤í”„ë§ì´ë¼ëŠ” ë‹¨ì–´ëŠ” ë¬¸ë§¥ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ì‚¬ìš©ëœë‹¤
    - ìŠ¤í”„ë§ DI ì»¨í…Œì´ë„ˆ ê¸°ìˆ 
    - ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬
    - ìŠ¤í”„ë§ ë¶€íŠ¸, ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ ë“±ì„ ëª¨ë‘ í¬í•¨í•œ ìŠ¤í”„ë§ ìƒíƒœê³„

## ìŠ¤í”„ë§ì˜ í•µì‹¬

- ìŠ¤í”„ë§ì€ ìë°” ì–¸ì–´ ê¸°ë°˜ì˜ í”„ë ˆì„ì›Œí¬
- ìë°” ì–¸ì–´ì˜ ê°€ì¥ í° íŠ¹ì§• - **ê°ì²´ ì§€í–¥ ì–¸ì–´**
- ìŠ¤í”„ë§ì€ ê°ì²´ ì§€í–¥ ì–¸ì–´ê°€ ê°€ì§„ ê°•ë ¥í•œ íŠ¹ì§•ì„ ì‚´ë ¤ë‚´ëŠ” í”„ë ˆì„ì›Œí¬
- ìŠ¤í”„ë§ì€ **ì¢‹ì€ ê°ì²´ ì§€í–¥** ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” í”„ë ˆì„ì›Œí¬

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°

## ê°ì²´ ì§€í–¥ íŠ¹ì§•

- ì¶”ìƒí™”
- ìº¡ìŠí™”
- ìƒì†
- **ë‹¤í˜•ì„±**

## ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°

- ì»´í“¨í„° í”„ë¡œê·¸ë¨ì„ ì—¬ëŸ¬ ê°œì˜ ë…ë¦½ëœ ë‹¨ìœ„, **ê°ì²´**ë“¤ì˜ **ëª¨ì„**ìœ¼ë¡œ íŒŒì•…í•˜ëŠ” ê²ƒ
- ê°ê°ì˜ ê°ì²´ëŠ” ë©”ì„¸ì§€ë¥¼ ì£¼ê³ ë°›ê³ , ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆìŒ (**í˜‘ë ¥**)
- í”„ë¡œê·¸ë¨ì„ **ìœ ì—°**í•˜ê³  **ë³€ê²½**ì´ ìš©ì´í•˜ê²Œ ë§Œë“œëŠ” ê²ƒ â†’ ëŒ€ê·œëª¨ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì— ì´ìš©

    
    ìœ ì—°í•˜ê³ , ë³€ê²½ì´ ìš©ì´?

    - ë ˆê³  ë¸”ëŸ­ ì¡°ë¦½í•˜ë“¯ì´
    - í‚¤ë³´ë“œ, ë§ˆìš°ìŠ¤ ê°ˆì•„ ë¼ìš°ë“¯ì´
    - ì»´í“¨í„° ë¶€í’ˆ ê°ˆì•„ ë¼ìš°ë“¯ì´
    - ì»´í¬ë„ŒíŠ¸ë¥¼ ì‰½ê³  ìœ ì—°í•˜ê²Œ ë³€ê²½í•˜ë©´ì„œ ê°œë°œí•  ìˆ˜ ìˆëŠ” ë°©ë²•

    â†’ ë‹¤í˜•ì„± (Polymorphism)

# ë‹¤í˜•ì„±

## ë‹¤í˜•ì„±ì˜ ì‹¤ì„¸ê³„ ë¹„ìœ 

- ì‹¤ì„¸ê³„ì™€ ê°ì²´ ì§€í–¥ì„ 1:1 ë¡œ ë§¤ì¹­ X â†’ ê·¸ë˜ë„ ì‹¤ì„¸ê³„ì˜ ë¹„ìœ ë¡œ ì´í•´í•˜ê¸°ì—ëŠ” ì¢‹ìŒ
- **ì—­í• **ê³¼ **êµ¬í˜„**ìœ¼ë¡œ ì„¸ìƒì„ êµ¬ë¶„
- ì˜ˆì‹œ
    - ìš´ì „ì - ìë™ì°¨
    - ê³µì—° ë¬´ëŒ€
    - í‚¤ë³´ë“œ, ë§ˆìš°ìŠ¤, ì„¸ìƒì˜ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ë“¤
    - ì •ë ¬ ì•Œê³ ë¦¬ì¦˜
    - í• ì¸ ì •ì±… ë¡œì§

![Untitled](img/ìš´ì „ì-ìë™ì°¨.png)

â¡ï¸ ìë™ì°¨ê°€ ë°”ë€Œì–´ë„ ìš´ì „ìëŠ” ìš´ì „ ê°€ëŠ¥

â¡ï¸ ìë™ì°¨ ë¬´í•œ í™•ì¥ ê°€ëŠ¥

â¡ï¸ í´ë¼ì´ì–¸íŠ¸ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  ìƒˆë¡œìš´ ê¸°ëŠ¥ ì œê³µ ê°€ëŠ¥

![Untitled](img/ë¡œë¯¸ì˜¤ì™€_ì¤„ë¦¬ì—£_ê³µì—°.png)

â¡ï¸ ë°°ìš°ëŠ” ëŒ€ì²´ ê°€ëŠ¥

â¡ï¸ ìœ ì—°í•˜ê³  ë³€ê²½ ìš©ì´

## ì—­í• ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬

- ì¥ì 
    - ì„¸ìƒì´ **ë‹¨ìˆœ**í•´ì§€ê³ , **ìœ ì—°**í•´ì§€ë©° **ë³€ê²½**ì´ í¸ë¦¬
    - **í´ë¼ì´ì–¸íŠ¸**ëŠ” ëŒ€ìƒì˜ ì—­í• (ì¸í„°í˜ì´ìŠ¤)ë§Œ ì•Œë©´ ë¨
    - **í´ë¼ì´ì–¸íŠ¸**ëŠ” êµ¬í˜„ ëŒ€ìƒì˜ **ë‚´ë¶€ êµ¬ì¡°ë¥¼ ëª°ë¼**ë„ ë¨
    - **í´ë¼ì´ì–¸íŠ¸**ëŠ” êµ¬í˜„ ëŒ€ìƒì˜ **ë‚´ë¶€ êµ¬ì¡°ê°€ ë³€ê²½**ë˜ì–´ë„ ì˜í–¥ì„ ë°›ì§€ ì•ŠìŒ
    - **í´ë¼ì´ì–¸íŠ¸**ëŠ” êµ¬í˜„ **ëŒ€ìƒ ìì²´ë¥¼ ë³€ê²½**í•´ë„ ì˜í–¥ì„ ë°›ì§€ ì•ŠìŒ


### ìë°” ì–¸ì–´

- ìë°” ì–¸ì–´ì˜ ë‹¤í˜•ì„±ì„ í™œìš©
    - ì—­í•  = ì¸í„°í˜ì´ìŠ¤
    - êµ¬í˜„ = ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤, êµ¬í˜„ ê°ì²´
- ê°ì²´ë¥¼ ì„¤ê³„í•  ë•Œ **ì—­í• **ê³¼ **êµ¬í˜„**ì„ ëª…í™•íˆ ë¶„ë¦¬
- ê°ì²´ ì„¤ê³„ì‹œ ì—­í• (ì¸í„°í˜ì´ìŠ¤)ë¥¼ ë¨¼ì € ë¶€ì—¬ í›„, ê·¸ ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ” êµ¬í˜„ ê°ì²´ ë§Œë“¤ê¸°

## ìë°” ì–¸ì–´ì˜ ë‹¤í˜•ì„±

- **ì˜¤ë²„ë¼ì´ë”©**
- ë‹¤í˜•ì„±ìœ¼ë¡œ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ê°ì²´ë¥¼ ì‹¤í–‰ ì‹œì ì— ìœ ì—°í•˜ê²Œ ë³€ê²½ ê°€ëŠ¥
- í´ë˜ìŠ¤ ìƒì† ê´€ê³„ë„ ë‹¤í˜•ì„±, ì˜¤ë²„ë¼ì´ë”© ì ìš© ê°€ëŠ¥

![Untitled](img/ìë°”_ì–¸ì–´ì˜_ë‹¤í˜•ì„±.png)

![Untitled](img/í´ë¼ì´ì–¸íŠ¸ëŠ”_MemberRepository_ì˜ì¡´.png)

â¡ï¸ í´ë¼ì´ì–¸íŠ¸ëŠ” MemberRepository ì˜ì¡´

```java
// 1
public class MemberService {
	private MemberRepository memberRepository = new MemmoryMemberRepository();
}

// 2
public class MemberService {
	private MemberRepository memberRepository = new JdbcMemberRepository();
}
```

![Untitled](img/í´ë¼ì´ì–¸íŠ¸ëŠ”_MemberRepository_ì˜ì¡´2.png)

![Untitled](img/í´ë¼ì´ì–¸íŠ¸ëŠ”_MemberRepository_ì˜ì¡´_ì „ì²´ê´€ê³„.png)

## ë‹¤í˜•ì„±ì˜ ë³¸ì§ˆ

- ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ **ì‹¤í–‰ ì‹œì **ì— **ìœ ì—°**í•˜ê²Œ **ë³€ê²½** ê°€ëŠ¥
- **í˜‘ë ¥** : ê°ì²´ ì‚¬ì´ì˜ ê´€ê³„
- **í´ë¼ì´ì–¸íŠ¸ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ , ì„œë²„ì˜ êµ¬í˜„ ê¸°ëŠ¥ì„ ìœ ì—°í•˜ê²Œ ë³€ê²½ ê°€ëŠ¥**

## ì—­í• ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬

### ì •ë¦¬

- ìœ ì—°í•˜ê³ , ë³€ê²½ì´ ìš©ì´
- í™•ì¥ ê°€ëŠ¥í•œ ì„¤ê³„ (ë¬´í•œ í™•ì¥)
- í´ë¼ì´ì–¸íŠ¸ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ” ë³€ê²½ ê°€ëŠ¥

### í•œê³„

- ì—­í• (ì¸í„°í˜ì´ìŠ¤)ì´ ë³€í•˜ë©´, í´ë¼ì´ì–¸íŠ¸ & ì„œë²„ì— ë³€ê²½ ë°œìƒ

## ìŠ¤í”„ë§ê³¼ ê°ì²´ ì§€í–¥

- â­**ë‹¤í˜•ì„±**
- ìŠ¤í”„ë§ì€ ë‹¤í˜•ì„±ì„ ê·¹ëŒ€í™”í•´ì„œ ì´ìš©í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤Œ
- ì œì–´ì˜ ì—­ì „(IoC), ì˜ì¡´ê´€ê³„ ì£¼ì…(DI) : ë‹¤í˜•ì„±ì„ í™œìš©í•´ ì—­í• ê³¼ êµ¬í˜„ì„ í¸ë¦¬í•˜ê²Œ ë‹¤ë£° ìˆ˜ ìˆë„ë¡ ì§€ì›
- ìŠ¤í”„ë§ì„ ì‚¬ìš©í•˜ë©´ êµ¬í˜„ì„ í¸ë¦¬í•˜ê²Œ ë³€ê²½ ê°€ëŠ¥

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ 5ê°€ì§€ ì›ì¹™ (SOLID)

- ê°€ë” ë©´ì ‘ì—ì„œ ë‚˜ì˜´ ğŸ‘€

## SOLID
> í´ë¦° ì½”ë“œë¡œ ìœ ëª…í•œ ë¡œë²„íŠ¸ ë§ˆí‹´ì´ ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ 5ê°€ì§€ ì›ì¹™ì„ ì •ë¦¬

- SRP (Single Responsibility Principle) : ë‹¨ì¼ ì±…ì„ ì›ì¹™
- OCP (Open/Closed Principle): ê°œë°©-íì‡„ ì›ì¹™
- LSP (Liskov Substitution Principle) : ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ ì›ì¹™
- ISP (Interface Segregation Principle) : ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™
- DIP (Dependency Inversion Principle) : ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™

## SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™
> Single Responsibility Principle

- í•œ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì ¸ì•¼ í•œë‹¤
- ê¸°ì¤€ : **ë³€ê²½**
  - ë³€ê²½ì´ ìˆì„ ë•Œ íŒŒê¸‰ íš¨ê³¼ê°€ ì ìœ¼ë©´ ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ì˜ ë”°ë¥¸ ê²ƒ
- ì˜ˆ) UI ë³€ê²½, ê°ì²´ì˜ ìƒì„±ê³¼ ì‚¬ìš©ì„ ë¶„ë¦¬

## â­â­â­ OCP ê°œë°©-íì‡„ ì›ì¹™
> Open/Closed Principle

- ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” **í™•ì¥ì—ëŠ” ì—´ë ¤** ìˆìœ¼ë‚˜ **ë³€ê²½ì—ëŠ” ë‹«í˜€** ìˆì–´ì•¼ í•œë‹¤
- **ë‹¤í˜•ì„±** í™œìš©
- ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ í•˜ë‚˜ ë§Œë“¤ì–´ì„œ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ êµ¬í˜„

```java
public class MemberService {
	// private MemberRepository memberRepository = new MemoryMemberRepository();
	private MemberRepository memberRepository = new JdbcMemberRepository();
}
```

### ë¬¸ì œì 

- MemberService í´ë¼ì´ì–¸íŠ¸ê°€ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ì„ íƒ
  - MemberRepository m = new MemoryMemberRepository(); â† ê¸°ì¡´ ì½”ë“œ
  - MemberRepository m = new JdbcMemberRepository(); â† ë³€ê²½ ì½”ë“œ
- **êµ¬í˜„ ê°ì²´ë¥¼ ë³€ê²½í•˜ë ¤ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ë³€ê²½í•´ì•¼ í•¨**
- **ë‹¤í˜•ì„±ì„ ì‚¬ìš©í–ˆì§€ë§Œ OCP ì›ì¹™ ë¶ˆë§Œì¡±**
- í•´ê²°ì±… : ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê´€ê´€ê³„ë¥¼ ë§ºì–´ì£¼ëŠ” ë³„ë„ì˜ ì¡°ë¦½, ì„¤ì •ìê°€ í•„ìš”í•˜ë‹¤

## LSP ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ ì›ì¹™
> Liskov Substitution Principle

- í”„ë¡œê·¸ë¨ì˜ ê°ì²´ëŠ” í”„ë¡œê·¸ë¨ì˜ ì •í™•ì„±ì„ ê¹¨ëœ¨ë¦¬ì§€ ì•Šìœ¼ë©´ì„œ í•˜ìœ„ íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë°”ê¿€ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤
- ë‹¤í˜•ì„±ì—ì„œ í•˜ìœ„ í´ë˜ìŠ¤ëŠ” ì¸í„°í˜ì´ìŠ¤ ê·œì•½ì„ ë‹¤ ì§€ì¼œì•¼ í•œë‹¤ëŠ” ê²ƒ
- ì˜ˆ) ìë™ì°¨ ì¸í„°í˜ì´ìŠ¤ì˜ ì—‘ì…€ì€ ì•ìœ¼ë¡œ ê°€ëŠ” ê¸°ëŠ¥, ë’¤ë¡œ ê°€ê²Œ êµ¬í˜„í•˜ë©´ LSP ìœ„ë°˜, ëŠë¦¬ë”ë¼ë„ ì•ìœ¼ë¡œ ê°€ì•¼í•¨

## ISP ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™
> Interface Segregation Principle

- íŠ¹ì • í´ë¼ì´ì–¸íŠ¸ë¥¼ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ ì—¬ëŸ¬ ê°œê°€ ë²”ìš© ì¸í„°í˜ì´ìŠ¤ í•˜ë‚˜ë³´ë‹¤ ë‚«ë‹¤
- ìë™ì°¨ ì¸í„°í˜ì´ìŠ¤ â†’ ìš´ì „ ì¸í„°í˜ì´ìŠ¤, ì •ë¹„ ì¸í„°í˜ì´ìŠ¤ë¡œ ë¶„ë¦¬
- ì‚¬ìš©ì í´ë¼ì´ì–¸íŠ¸ â†’ ìš´ì „ì í´ë¼ì´ì–¸íŠ¸, ì •ë¹„ì‚¬ í´ë¼ì´ì–¸íŠ¸ë¡œ ë¶„ë¦¬
- ë¶„ë¦¬í•˜ë©´ ì •ë¹„ ì¸í„°í˜ì´ìŠ¤ ìì²´ê°€ ë³€í•´ë„ ìš´ì „ì í´ë¼ì´ì–¸íŠ¸ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŒ
- ì¸í„°í˜ì´ìŠ¤ê°€ ëª…í™•í•´ì§€ê³ , ëŒ€ì²´ ê°€ëŠ¥ì„±ì´ í–¥ìƒ

## â­â­â­ DIP ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™
> Dependency Inversion Principle

- â€œì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ì§€, êµ¬ì²´í™”ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤â€
- êµ¬í˜„ í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ì§€ ë§ê³ , ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ë¼ëŠ” ëœ»
- MemberService ëŠ” ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ì§€ë§Œ, êµ¬í˜„ í´ë˜ìŠ¤ë„ ë™ì‹œ ì˜ì¡´
- MemberService í´ë¼ì´ì–¸íŠ¸ê°€ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ì„ íƒ
  - MemberRepository m = new MemoryMemberRepository(); â†’ **DIP ìœ„ë°˜**

## ì •ë¦¬

- ê°ì²´ ì§€í–¥ì˜ í•µì‹¬ì€ ë‹¤í˜•ì„±
- **ë‹¤í˜•ì„± ë§Œìœ¼ë¡œëŠ” OCP, DIP ë¥¼ ì§€í‚¬ ìˆ˜ ì—†ìŒ**

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ê°ì²´ ì§€í–¥ ì„¤ê³„ì™€ ìŠ¤í”„ë§

- **ìŠ¤í”„ë§ì€ ë‹¤ìŒ ê¸°ìˆ ë¡œ ë‹¤í˜•ì„± + OCP, DIP ë¥¼ ê°€ëŠ¥í•˜ê²Œ ì§€ì›**
  - DI (Dependency Injection) : ì˜ì¡´ê´€ê³„, ì˜ì¡´ì„± ì£¼ì…
  - DI ì»¨í…Œì´ë„ˆ ì œê³µ
- **í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì˜ ë³€ê²½ ì—†ì´ ê¸°ëŠ¥ í™•ì¥**
- ì‰½ê²Œ ë¶€í’ˆì„ êµì²´í•˜ë“¯ì´ ê°œë°œ

## ì •ë¦¬

- ëª¨ë“  ì„¤ê³„ì— **ì—­í• **ê³¼ **êµ¬í˜„**ì„ ë¶„ë¦¬
- ì´ìƒì ìœ¼ë¡œëŠ” ëª¨ë“  ì„¤ê³„ì— ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¶€ì—¬í•˜ì

### ì‹¤ë¬´ ê³ ë¯¼

- ì¸í„°í˜ì´ìŠ¤ ë„ì… ì‹œ ì¶”ìƒí™” ë¹„ìš© ë°œìƒ
- ê¸°ëŠ¥ì„ í™•ì¥í•  ê°€ëŠ¥ì„±ì´ ì—†ë‹¤ë©´, êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ê³ , í–¥í›„ ê¼­ í•„ìš”í•  ë•Œ ë¦¬íŒ©í„°ë§í•˜ì—¬ ì¸í„°í˜ì´ìŠ¤ ë„ì…


<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ğŸ¾ğŸ¾ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ ì´í•´1 - ì˜ˆì œ ë§Œë“¤ê¸°ğŸ¾ğŸ¾

# í”„ë¡œì íŠ¸ ìƒì„±

- ìŠ¤í”„ë§ ì—†ì´ ìˆœìˆ˜ ìë°”ë¡œ êµ¬í˜„

- ì‚¬ì „ ì¤€ë¹„ë¬¼
  - Oracle JDK ì˜ Java 11 ì„¤ì¹˜
  - IDE : IntelliJ ë˜ëŠ” Eclipse ì„¤ì¹˜

## [ìŠ¤í”„ë§ ë¶€íŠ¸ ìŠ¤íƒ€í„° ì‚¬ì´íŠ¸](https://start.spring.io)ë¡œ ì´ë™í•´ì„œ ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ ìƒì„±


    ğŸ’¡ **ì£¼ì˜ ! ìŠ¤í”„ë§ ë¶€íŠ¸ 3.0**
    â†’ ìŠ¤í”„ë§ ë¶€íŠ¸ 3.0 ì„ ì„ íƒí•˜ê²Œ ë˜ë©´ ë‹¤ìŒ ë¶€ë¶„ í™•ì¸í•˜ê¸°
    1. Java 17 ì´ìƒ ì‚¬ìš©
    2. javax íŒ¨í‚¤ì§€ ì´ë¦„ì„ jakarta ë¡œ ë³€ê²½í•´ì•¼ í•¨

    íŒ¨í‚¤ì§€ ì´ë¦„ ë³€ê²½ ì˜ˆì‹œ
    - JPA ì• ë…¸í…Œì´ì…˜ :
    javax.persistence.Entity â†’ jakarta.persistence.Entity
    - ìŠ¤í”„ë§ì—ì„œ ìì£¼ ì‚¬ìš©í•˜ëŠ” @PostConstruct ì• ë…¸í…Œì´ì…˜ :
    javax.annotation.PostConstruct â†’ jakarta.annotation.PostConstruct
    - ìŠ¤í”„ë§ì—ì„œ ìì£¼ ì‚¬ìš©í•˜ëŠ” ê²€ì¦ ì• ë…¸í…Œì´ì…˜
    javax. validation â†’ jakarta.validation

    ìì„¸í•œ ë‚´ìš©
    https://bit.ly/springboot3


- í”„ë¡œì íŠ¸ ì„ íƒ
  - Project : Gradle - Groovy Project
  - Language : Java
  - Spring Boot : 3.1.4 (SNAPSHOT/M3 ëŠ” ì•„ì§ ì •ì‹ release ì•„ë‹˜)
  - Project Metadata
    - Group : hello
    - Artifact : core
    - Packaging : Jar
    - Java : 17
  - Dependencies : ì„ íƒ ì•ˆí•¨ â†’ core library ë§Œ ê°€ì§€ê³  ê°„ë‹¨í•˜ê²Œ ìƒì„±ë¨

![Untitled](img/ìŠ¤í”„ë§_ìŠ¤íƒ€í„°.png)

- í”„ë¡œì íŠ¸ ì—´ê¸° : build.gradle â†’ open
- build.gradle setting

```java
plugins {
	id 'java'
	id 'org.springframework.boot' version '3.1.4'
	id 'io.spring.dependency-management' version '1.1.3'
}

group = 'hello'
version = '0.0.1-SNAPSHOT'

java {
	sourceCompatibility = '17'
}

repositories {
	mavenCentral()
}

dependencies {
	implementation 'org.springframework.boot:spring-boot-starter'
	testImplementation 'org.springframework.boot:spring-boot-starter-test'
}

tasks.named('test') {
	useJUnitPlatform()
}
```

## ë™ì‘ í™•ì¸í•˜ê¸°(ê¸°ë³¸ ë©”ì¸ í´ë˜ìŠ¤ ì‹¤í–‰) : src/main/java/hello.core ì˜ CoreApplication Run í•´ë³´ê¸°

![Untitled](img/ìŠ¤í”„ë§_ìŠ¤íƒ€í„°_ë™ì‘_í™•ì¸.png)

Gradle ëŒ€ì‹  IntelliJë¡œ ìë°” ì§ì ‘ ì‹¤í–‰í•˜ê¸° â†’ ì‹¤í–‰ ì†ë„ê°€ ë” ë¹ ë¥´ë‹¤

- File - Settings - Build, Execution, Deployment - Build Tools - Gradle - Gradle projects
  - Build and run using : Gradle â†’ IntelliJ IDEA ë³€ê²½
  - Run tests using : Gradle â†’ IntelliJ IDEA ë³€ê²½

![Untitled](img/Gradle_ëŒ€ì‹ _IntelliJ.png)

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ê³¼ ì„¤ê³„

- íšŒì›
  - íšŒì› ê°€ì…, ì¡°íšŒ
  - íšŒì› ë“±ê¸‰ : ì¼ë°˜, VIP
  - íšŒì› ë°ì´í„°: ìì²´ DB êµ¬ì¶•, ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™ ê°€ëŠ¥ì„± (ë¯¸í™•ì •)
- ì£¼ë¬¸ê³¼ í• ì¸ ì •ì±…
  - íšŒì›ì´ ìƒí’ˆ ì£¼ë¬¸
  - íšŒì› ë“±ê¸‰ì— ë”°ë¥¸ í• ì¸ ì •ì±…
  - ê³ ì • ê¸ˆì•¡ í• ì¸ : ëª¨ë“  VIP 1000ì› í• ì¸ (ë³€ê²½ ê°€ëŠ¥)
  - í• ì¸ ì •ì±… ë³€ê²½ ê°€ëŠ¥ì„±, í• ì¸ì„ í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŒ (ë¯¸í™•ì •)

â†’ ê³ ì •ë˜ì§€ ì•Šì€ ìš”êµ¬ì‚¬í•­ : ê°ì²´ ì§€í–¥ ì„¤ê³„ ë°©ë²• ì‚¬ìš©í•˜ê¸°

â†’ êµ¬í˜„ì²´ë¥¼ ë°”ê¿€ ìˆ˜ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# íšŒì› ë„ë©”ì¸ ì„¤ê³„

- íšŒì› ë„ë©”ì¸ ìš”êµ¬ì‚¬í•­
  - íšŒì› ê°€ì…, ì¡°íšŒ
  - íšŒì› ë“±ê¸‰ : ì¼ë°˜, VIP
  - íšŒì› ë°ì´í„°: ìì²´ DB êµ¬ì¶•, ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™ ê°€ëŠ¥ì„± (ë¯¸í™•ì •)


- íšŒì› ë„ë©”ì¸ í˜‘ë ¥ ê´€ê³„

![Untitled](img/íšŒì›_ë„ë©”ì¸_í˜‘ë ¥_ê´€ê³„.png)

- íšŒì› í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

![Untitled](img/íšŒì›_í´ë˜ìŠ¤_ë‹¤ì´ì–´ê·¸ë¨.png)

â¡ï¸ ì¸í„°í˜ì´ìŠ¤ : MemberService

â¡ï¸ êµ¬í˜„ì²´ : MemberServiceImpl

â¡ï¸ MemberRepository = íšŒì› ì €ì¥ì†Œ

- íšŒì› ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨ (ê°ì²´ ê°„ ë©”ëª¨ë¦¬ ì°¸ì¡°)

![Untitled](img/íšŒì›_ê°ì²´_ë‹¤ì´ì–´ê·¸ë¨.png)

MemberServiceImpl = íšŒì› ì„œë¹„ìŠ¤

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# íšŒì› ë„ë©”ì¸ ê°œë°œ

- ë§Œë“¤ ê²ƒ

  ![Untitled.png](img/íšŒì›_í´ë˜ìŠ¤_ë‹¤ì´ì–´ê·¸ë¨.png)


1. member íŒ¨í‚¤ì§€ ìƒì„±
2. member íŒ¨í‚¤ì§€ì— Grade ì´ë¦„ì˜ Enum ìƒì„±

```java
package hello.core.member;

public enum Grade {
    // íšŒì› ë“±ê¸‰
    BASIC,
    VIP
}
```

3. member íŒ¨í‚¤ì§€ì— Member ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core.member;

public class Member {
    private Long id;
    private String name;
    private Grade grade;

    // Alt + Insert -> Constructor, Getter&Setter

    public Member(Long id, String name, Grade grade) {
        this.id = id;
        this.name = name;
        this.grade = grade;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Grade getGrade() {
        return grade;
    }

    public void setGrade(Grade grade) {
        this.grade = grade;
    }
}
```

4. member íŒ¨í‚¤ì§€ì— MemberRepository ì´ë¦„ì˜ Interface ìƒì„±

```java
package hello.core.member;

public interface MemberRepository {
    void save(Member member);

    Member findById(Long memberId);
}
```

5. member íŒ¨í‚¤ì§€ì— MemoryMemberRepository ì´ë¦„ì˜ Class ìƒì„± (MemberRepository êµ¬í˜„ì²´)

```java
package hello.core.member;

import java.util.HashMap;
import java.util.Map;

public class MemoryMemberRepository implements MemberRepository{

    // ì‹¤ë¬´ì—ì„œëŠ” ë™ì‹œì„± ì´ìŠˆë¥¼ ê³ ë ¤í•´ ConcurrentHashMap ì‚¬ìš©
    private static Map<Long, Member> store = new HashMap<>();

    @Override
    public void save(Member member) {
        store.put(member.getId(), member);
    }

    @Override
    public Member findById(Long memberId) {
        return store.get(memberId);
    }
}
```

6. member íŒ¨í‚¤ì§€ì— MemberService ì´ë¦„ì˜ Interface ìƒì„±

```java
package hello.core.member;

public interface MemberService {
    // íšŒì› ê°€ì…
    void join(Member member);

    // íšŒì› ì¡°íšŒ
    Member findMember(Long memberId);
}
```

7. member íŒ¨í‚¤ì§€ì— MemberServiceImpl ì´ë¦„ì˜ Class ìƒì„± (MemberService êµ¬í˜„ì²´)

```java
package hello.core.member;

public class MemberServiceImpl implements MemberService{

    private final MemberRepository memberRepository = new MemoryMemberRepository();

    @Override
    public void join(Member member) {
        memberRepository.save(member);
    }

    @Override
    public Member findMember(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# íšŒì› ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸

1. main/java/hello.core íŒ¨í‚¤ì§€ì— MemberApp ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;

public class MemberApp {
    // psvm
    public static void main(String[] args) {
        MemberService memberService = new MemberServiceImpl();
        Member member = new Member(1L, "memberA", Grade.VIP); // ctrl + alt + v
        memberService.join(member);

        Member findMember = memberService.findMember(1L);
        System.out.println("new member = " + member.getName());
        System.out.println("findMember = " + findMember.getName());

    }
}
```

2. test/java/hello.core íŒ¨í‚¤ì§€ì— member ì´ë¦„ì˜ Package ìƒì„±
3. ë§Œë“  member íŒ¨í‚¤ì§€ì— MemberServiceTest ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core.member;

import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.Test;

public class MemberServiceTest {

    MemberService memberService = new MemberServiceImpl();

    @Test
    void join() {
        // given
        Member member = new Member(1L, "memberA", Grade.VIP);

        // when
        memberService.join(member);
        Member findMember = memberService.findMember(1L);

        // then
        Assertions.assertThat(member).isEqualTo(findMember);

    }
}
```

![Untitled](img/íšŒì›_ë„ë©”ì¸_ì‹¤í–‰_í…ŒìŠ¤íŠ¸.png)

â†’ í…ŒìŠ¤íŠ¸ ì„±ê³µ !

ğŸ’¡ ë¬¸ì œì  â†’ ì¸í„°í˜ì´ìŠ¤ ë¿ë§Œì´ ì•„ë‹ˆë¼ êµ¬í˜„ì²´ë„ ì§ì ‘ í˜¸ì¶œí•˜ê³  ìˆìŒ

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ì„¤ê³„

- ì£¼ë¬¸ê³¼ í• ì¸ ì •ì±…
  - íšŒì›ì´ ìƒí’ˆ ì£¼ë¬¸
  - íšŒì› ë“±ê¸‰ì— ë”°ë¥¸ í• ì¸ ì •ì±…
  - ê³ ì • ê¸ˆì•¡ í• ì¸ : ëª¨ë“  VIP 1000ì› í• ì¸ (ë³€ê²½ ê°€ëŠ¥)
  - í• ì¸ ì •ì±… ë³€ê²½ ê°€ëŠ¥ì„±, í• ì¸ì„ í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŒ (ë¯¸í™•ì •)


- ì£¼ë¬¸ ë„ë©”ì¸ í˜‘ë ¥, ì—­í• , ì±…ì„

![Untitled](img/ì£¼ë¬¸_ë„ë©”ì¸.png)

1. **ì£¼ë¬¸ ìƒì„±** : í´ë¼ì´ì–¸íŠ¸ëŠ” ì£¼ë¬¸ ì„œë¹„ìŠ¤ì— ì£¼ë¬¸ ìƒì„± ìš”ì²­
2. **íšŒì› ì¡°íšŒ** : ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” íšŒì› ì €ì¥ì†Œì—ì„œ íšŒì›ì„ ì¡°íšŒ (í• ì¸ì„ ìœ„í•´ íšŒì› ë“±ê¸‰ í•„ìš”)
3. **í• ì¸ ì ìš©** : ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” íšŒì› ë“±ê¸‰ì— ë”°ë¼ í• ì¸ ì ìš©
4. **ì£¼ë¬¸ ê²°ê³¼ ë°˜í™˜** : ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” í• ì¸ ê²°ê³¼ë¥¼ í¬í•¨í•œ ì£¼ë¬¸ ê²°ê³¼ ë°˜í™˜


- ì£¼ë¬¸ ë„ë©”ì¸ ì „ì²´

![Untitled](img/ì£¼ë¬¸_ë„ë©”ì¸_ì „ì²´.png)

â¡ï¸ **ì—­í• ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬**í•´ì„œ ììœ ë¡­ê²Œ êµ¬í˜„ ê°ì²´ë¥¼ ì¡°ë¦½í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„

â¡ï¸ íšŒì› ì €ì¥ì†Œ, í• ì¸ ì •ì±… ìœ ì—°í•˜ê²Œ ë³€ê²½ ê°€ëŠ¥

- ì£¼ë¬¸ ë„ë©”ì¸ í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

![Untitled](img/ì£¼ë¬¸_ë„ë©”ì¸_í´ë˜ìŠ¤_ë‹¤ì´ì–´ê·¸ë¨.png)

- ì£¼ë¬¸ ë„ë©”ì¸ ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨1

![Untitled](img/ì£¼ë¬¸_ë„ë©”ì¸_ê°ì²´_ë‹¤ì´ì–´ê·¸ë¨1.png)

â¡ï¸ íšŒì›ì„ ë©”ëª¨ë¦¬ì—ì„œ ì¡°íšŒí•˜ê³ , ì •ì•¡ í• ì¸ ì •ì±…(ê³ ì • ê¸ˆì•¡)ì„ ì§€ì›í•´ë„ ì£¼ë¬¸ ì„œë¹„ìŠ¤ë¥¼ ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ë¨

â¡ï¸ ì—­í• ë“¤ì˜ í˜‘ë ¥ ê´€ê³„ ì¬ì‚¬ìš© ê°€ëŠ¥

- ì£¼ë¬¸ ë„ë©”ì¸ ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨2

![Untitled](img/ì£¼ë¬¸_ë„ë©”ì¸_ê°ì²´_ë‹¤ì´ì–´ê·¸ë¨2.png)

â¡ï¸ íšŒì›ì„ ë©”ëª¨ë¦¬ê°€ ì•„ë‹Œ ì‹¤ì œ DB ì—ì„œ ì¡°íšŒí•˜ê³ , ì •ë¥  í• ì¸ ì •ì±…(ì£¼ë¬¸ ê¸ˆì•¡ì— ë”°ë¼ % í• ì¸)ì„ ì§€ì›í•´ë„ ì£¼ë¬¸ ì„œë¹„ìŠ¤ë¥¼ ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ë¨

â¡ï¸ ì—­í• ë“¤ì˜ í˜‘ë ¥ ê´€ê³„ ì¬ì‚¬ìš© ê°€ëŠ¥

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ê°œë°œ

1. hello.core íŒ¨í‚¤ì§€ì— discount ì´ë¦„ì˜ Package ìƒì„±
2. ë§Œë“  discount íŒ¨í‚¤ì§€ì— DiscountPolicy ì´ë¦„ì˜ Interface ìƒì„±

```java
package hello.core.discount;

import hello.core.member.Member;

public interface DiscountPolicy {

    // return í• ì¸ ëŒ€ìƒ ê¸ˆì•¡
    int discount(Member member, int price);
}
```

3. discount íŒ¨í‚¤ì§€ì— FixDiscountPolicy ì´ë¦„ì˜ Class ìƒì„± (DiscountPolicy êµ¬í˜„ì²´)

```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;

public class FixDiscountPolicy implements DiscountPolicy{

    private int discountFixAmount = 1000; // 1000ì› í• ì¸

    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) { // Enum ë¹„êµ ==
            return discountFixAmount;
        } else {
            return 0;
        }
    }
}
```

4. hello.core íŒ¨í‚¤ì§€ì— order ì´ë¦„ì˜ Package ìƒì„±
5. ë§Œë“  order íŒ¨í‚¤ì§€ì— Order ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core.order;

public class Order {
    private Long memberId;
    private String itemName;
    private int itemPrice;
    private int discountPrice;

    public Order(Long memberId, String itemName, int itemPrice, int discountPrice) {
        this.memberId = memberId;
        this.itemName = itemName;
        this.itemPrice = itemPrice;
        this.discountPrice = discountPrice;
    }

    public int calculatePrice() {
        return itemPrice - discountPrice;
    }

    public Long getMemberId() {
        return memberId;
    }

    public void setMemberId(Long memberId) {
        this.memberId = memberId;
    }

    public String getItemName() {
        return itemName;
    }

    public void setItemName(String itemName) {
        this.itemName = itemName;
    }

    public int getItemPrice() {
        return itemPrice;
    }

    public void setItemPrice(int itemPrice) {
        this.itemPrice = itemPrice;
    }

    public int getDiscountPrice() {
        return discountPrice;
    }

    public void setDiscountPrice(int discountPrice) {
        this.discountPrice = discountPrice;
    }

    @Override
    public String toString() {
        return "Order{" +
                "memberId=" + memberId +
                ", itemName='" + itemName + '\'' +
                ", itemPrice=" + itemPrice +
                ", discountPrice=" + discountPrice +
                '}';
    }
}
```

6. order íŒ¨í‚¤ì§€ì— OrderService ì´ë¦„ì˜ Interface ìƒì„±

```java
package hello.core.order;

public interface OrderService {
    Order createOrder(Long memberId, String itemName, int itemPrice);

}
```

7. order íŒ¨í‚¤ì§€ì— OrderServiceImpl ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core.order;

import hello.core.member.Member;
import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.member.MemberRepository;
import hello.core.member.MemoryMemberRepository;

public class OrderServiceImpl implements OrderService{

    private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();

    @Override
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        Member member = memberRepository.findById(memberId);
        int discountPrice = discountPolicy.discount(member, itemPrice);

        return new Order(memberId, itemName, itemPrice, discountPrice);
    }
}
```

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸

1. main/java/hello.core ì— OrderApp ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.order.Order;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class OrderApp {
    public static void main(String[] args) {
        MemberService memberService = new MemberServiceImpl();
        OrderService orderService = new OrderServiceImpl();

        Long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);
        memberService.join(member);

        Order order = orderService.createOrder(memberId, "itemA", 10000);

        System.out.println("order = " + order);
        System.out.println("order.calculatePrice = " + order.calculatePrice());
    }
}
```

- Run

![Untitled](img/OrderApp.png)

2. test/java/hello.core ì— order ì´ë¦„ì˜ Package ìƒì„±
3. ë§Œë“  order íŒ¨í‚¤ì§€ì— OrderServiceTest ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core.order;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.Test;

public class OrderServiceTest {

    MemberService memberService = new MemberServiceImpl();
    OrderService orderService = new OrderServiceImpl();

    @Test
    void createOrder() {
        Long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);
        memberService.join(member);

        Order order = orderService.createOrder(memberId, "itemA", 10000);
        Assertions.assertThat(order.getDiscountPrice()).isEqualTo(1000);
    }
}
```

- Run

![Untitled](img/OrderServiceTest.png)

â†’ ì„±ê³µ !

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ğŸ¾ğŸ¾ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ ì´í•´2 - ê°ì²´ ì§€í–¥ ì›ë¦¬ ì ìš©ğŸ¾ğŸ¾

# ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ

### ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ í™•ì¥í•´ë³´ì

- ê³ ì • í• ì¸ â†’ ì •ë¥  í• ì¸ ì •ì±…

1. discount íŒ¨í‚¤ì§€ì— RateDiscountPolicy ì´ë¦„ì˜ Class ìƒì„± (DiscountPolicy êµ¬í˜„ì²´)

```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;

public class RateDiscountPolicy implements DiscountPolicy{

    // ctrl + shift + t : í…ŒìŠ¤íŠ¸ ë§Œë“¤ê¸°
    private int discountPercent = 10;

    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return price * discountPercent / 100;
        } else {
            return 0;
        }
    }
}
```

2. test/java/hello.core/discount ì— RateDiscountPolicyTest ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.*;

class RateDiscountPolicyTest {

    RateDiscountPolicy discountPolicy = new RateDiscountPolicy();

    @Test
    @DisplayName("VIP ëŠ” 10% í• ì¸ì´ ì ìš©ë˜ì–´ì•¼ í•œë‹¤")
    void vip_o() {
        // given
        Member member = new Member(1L, "memberVIP", Grade.VIP);

        // when
        int discount = discountPolicy.discount(member, 10000);

        // then
        Assertions.assertThat(discount).isEqualTo(1000);
    }

    @Test
    @DisplayName("VIP ê°€ ì•„ë‹ˆë©´ í• ì¸ì´ ì ìš©ë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤")
    void vip_x() {
        // given
        Member member = new Member(2L, "memberBASIC", Grade.BASIC);

        // when
        int discount = discountPolicy.discount(member, 10000);

        // then
        Assertions.assertThat(discount).isEqualTo(0);
    }
}
```

- Run

![Untitled](img/RateDiscountPolicyTest.png)

â†’ ì„±ê³µ!

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì ìš©ê³¼ ë¬¸ì œì 

- ë°©ê¸ˆ ì¶”ê°€í•œ í• ì¸ ì •ì±… ì ìš©í•˜ê¸°

â†’ OrderServiceImpl ì½”ë“œ ìˆ˜ì •

```java
...
public class OrderServiceImpl implements OrderService{

    private final MemberRepository memberRepository = new MemoryMemberRepository();
    // private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();

    ...
}
```

### ë¬¸ì œì 

- ì—­í• ê³¼ êµ¬í˜„ ë¶„ë¦¬ â†’ OK
- ë‹¤í˜•ì„± í™œìš© & ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ ê°ì²´ ë¶„ë¦¬ â†’ OK
- OCP, DIP ê°ì²´ì§€í–¥ ì„¤ê³„ ì›ì¹™ ì¤€ìˆ˜ â†’ X
  - DIP : êµ¬ì²´(êµ¬í˜„) í´ë˜ìŠ¤ì— ì˜ì¡´
    - ì¶”ìƒ(ì¸í„°í˜ì´ìŠ¤) ì˜ì¡´ : DiscountPolicy
    - êµ¬ì²´(êµ¬í˜„) í´ë˜ìŠ¤ : FixDiscountPolicy, RateDiscountPolicy
  - OCP : ê¸°ëŠ¥ í™•ì¥, ë³€ê²½ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì˜í–¥

- ê¸°ëŒ€í–ˆë˜ ì˜ì¡´ ê´€ê³„

![Untitled](img/ê¸°ëŒ€í–ˆë˜_ì˜ì¡´_ê´€ê³„.png)

â†’ DiscountPolicy ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ê¸°

- ì‹¤ì œ ì˜ì¡´ ê´€ê³„

![Untitled](img/ì‹¤ì œ_ì˜ì¡´_ê´€ê³„.png)

â†’ í´ë¼ì´ì–¸íŠ¸ OrderServiceImpl ì€ DiscountPolicy ì¸í„°í˜ì´ìŠ¤ ë¿ë§Œ ì•„ë‹ˆë¼ FixDiscountPolicy ì¸ êµ¬ì²´ í´ë˜ìŠ¤ë„ í•¨ê»˜ ì˜ì¡´ (**DIP ìœ„ë°˜**)

- ì •ì±… ë³€ê²½ ì‹œ

![Untitled](img/ì •ì±…_ë³€ê²½_ì‹œ_OCP_ìœ„ë°˜.png)

â†’ FixDiscountPolicy ë¥¼ RateDiscountPolicy ë¡œ ë³€ê²½í•˜ëŠ” ìˆœê°„ OrderServiceImpl ì˜ ì†ŒìŠ¤ ì½”ë“œê°€ ë³€ê²½ë¨ (**OCP ìœ„ë°˜**)

### ë¬¸ì œ í•´ê²° ë°©ë²•

- ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì„¤ê³„ ë³€ê²½í•˜ê¸°

â†’ ì½”ë“œ ë³€ê²½

```java
...
public class OrderServiceImpl implements OrderService{

    private final MemberRepository memberRepository = new MemoryMemberRepository();
    // private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    // private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
    private DiscountPolicy discountPolicy;

    ...
}
```

â¡ï¸ ì‹¤í–‰ ì‹œ NPE (Null Pointer Exception) ë°œìƒ

- ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ì„œëŠ” ëˆ„êµ°ê°€ê°€ í´ë¼ì´ì–¸íŠ¸ì¸ OrderServiceImpl ì— DiscountPolicy ì˜ êµ¬í˜„ ê°ì²´ë¥¼ ëŒ€ì‹  ìƒì„±í•˜ê³  ì£¼ì…í•´ì£¼ì–´ì•¼ í•¨

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# â­ ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬

â†’ ê¸°íšì ë§Œë“¤ê¸°

### App Config ë“±ì¥

- ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì²´ ë™ì‘ ë°©ì‹ì„ êµ¬ì„±í•˜ê¸° ìœ„í•´, êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ëŠ” ì±…ì„ì„ ê°€ì§€ëŠ” ë³„ë„ì˜ ì„¤ì • í´ë˜ìŠ¤

1. hello.core íŒ¨í‚¤ì§€ì— AppConfig ì´ë¦„ì„ ê°€ì§„ Class ìƒì„±
- ìƒì„±ì ì£¼ì…

```java
package hello.core;

import hello.core.discount.FixDiscountPolicy;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class AppConfig {
    // ìƒì„±ì ì£¼ì…
    public MemberService memberService() {
        return new MemberServiceImpl(new MemoryMemberRepository());
    }

    public OrderService orderService() {
        return new OrderServiceImpl(new MemoryMemberRepository(), new FixDiscountPolicy());
    }
}
```

- AppConfig ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤ì œ ë™ì‘ì— í•„ìš”í•œ â€œ**êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±**â€
  - MemberServiceImpl
  - MemoryMemberRepository
  - OrderServiceImpl
  - FixDiscountPolicy
- AppConfig ëŠ” ìƒì„±í•œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°(ë ˆí¼ëŸ°ìŠ¤)ë¥¼ â€œ**ìƒì„±ìë¥¼ í†µí•´ì„œ ì£¼ì…(ì—°ê²°)**â€
  - MemberServiceImpl â†’ MemoryMemberRepository
  - OrderServiceImpl â†’ MemoryMemberRepository, FixDiscountPolicy

2. MemberServiceImpl ì½”ë“œ ìˆ˜ì •

```java
...
public class MemberServiceImpl implements MemberService{

    private final MemberRepository memberRepository;

    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }

    ...
}
```

- ì„¤ê³„ ë³€ê²½ìœ¼ë¡œ MemberServiceImpl ì€ MemoryMemberRepository ë¥¼ ì˜ì¡´í•˜ì§€ ì•ŠìŒ â¡ï¸ MemberRepository ì¸í„°í˜ì´ìŠ¤ë§Œ ì˜ì¡´ (DIP ë§Œì¡±)
- MemberServiceImpl ëŠ” ìƒì„±ìë¥¼ í†µí•´ ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ë“¤ì–´ì˜¬ì§€ ì•Œ ìˆ˜ ì—†ìŒ (ì™¸ë¶€ - AppConfig ì—ì„œ ê²°ì •)
- MemberServiceImpl ëŠ” **ì˜ì¡´ê´€ê³„ì— ëŒ€í•œ ê³ ë¯¼ì€ ì™¸ë¶€**ì— ë§¡ê¸°ê³  **ì‹¤í–‰ì—ë§Œ ì§‘ì¤‘**


- í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

![Untitled](img/AppConfig_í´ë˜ìŠ¤_ë‹¤ì´ì–´ê·¸ë¨.png)

â†’ ê°ì²´ì˜ ìƒì„±ê³¼ ì—°ê²°ì€ AppConfig ë‹´ë‹¹

â†’ DIP ì™„ì„± : MemberServiceImpl ì€ MemberRepository ì¸ ì¶”ìƒì—ë§Œ ì˜ì¡´

â†’ ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ : ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì—­í• ê³¼ ì‹¤í–‰í•˜ëŠ” ì—­í• ì´ ëª…í™•íˆ ë¶„ë¦¬ë¨

- íšŒì› ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

![Untitled](img/AppConfig_íšŒì›_ê°ì²´_ë‹¤ì´ì–´ê·¸ë¨.png)

â†’ AppConfig ê°ì²´ëŠ” memoryMemberRepository ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ê·¸ ì°¸ì¡°ê°’ì„ memberServiceImpl ì„ ìƒì„±í•˜ë©´ì„œ ìƒì„±ìë¡œ ì „ë‹¬

â†’ ì˜ì¡´ ê´€ê³„ ì£¼ì…(DI - Dependency Injection) : í´ë¼ì´ì–¸íŠ¸ì¸ memberServiceImpl ì…ì¥ì—ì„œ ì˜ì¡´ ê´€ê³„ë¥¼ ì™¸ë¶€ì—ì„œ ì£¼ì…í•´ì£¼ëŠ” ê²ƒ ê°™ì´ ë³´ì„

3. OrderServiceImpl ì½”ë“œ ìˆ˜ì •

```java
...
public class OrderServiceImpl implements OrderService{

    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }

    ...
}
```

- ì„¤ê³„ ë³€ê²½ìœ¼ë¡œ OrderServiceImpl ì€ FixDiscountPolicy ë¥¼ ì˜ì¡´í•˜ì§€ ì•ŠìŒ â¡ï¸ DiscountPolicy ì¸í„°í˜ì´ìŠ¤ë§Œ ì˜ì¡´ (DIP ë§Œì¡±)
- OrderServiceImpl ëŠ” ìƒì„±ìë¥¼ í†µí•´ ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ë“¤ì–´ì˜¬ì§€ ì•Œ ìˆ˜ ì—†ìŒ (ì™¸ë¶€ - AppConfig ì—ì„œ ê²°ì •)
- OrderServiceImpl ì€ ì´ì œë¶€í„° ì‹¤í–‰ì—ë§Œ ì§‘ì¤‘
- OrderServiceImpl ì—ëŠ” MemoryMemberRepository, FixDiscountPolicy ê°ì²´ì˜ ì˜ì¡´ê´€ê³„ê°€ ì£¼ì…ë¨

### AppConfig ì‹¤í–‰

1. MemberApp ì½”ë“œ ìˆ˜ì •í•˜ê¸°

```java
...
public class MemberApp {
    public static void main(String[] args) {
        AppConfig appConfig = new AppConfig();
        MemberService memberService = appConfig.memberService();
        // MemberService memberService = new MemberServiceImpl();
        
        ...
    }
}
```

2. OrderApp ì½”ë“œ ìˆ˜ì •í•˜ê¸°

```java
...
public class OrderApp {
    public static void main(String[] args) {
        
        AppConfig appConfig = new AppConfig();
        MemberService memberService = appConfig.memberService();
        OrderService orderService = appConfig.orderService();
        // MemberService memberService = new MemberServiceImpl();
        // OrderService orderService = new OrderServiceImpl(memberRepository, discountPolicy);

        ...
    }
}
```

3. MemberServiceTest ì½”ë“œ ìˆ˜ì •í•˜ê¸°

```java
...
public class MemberServiceTest {

    MemberService memberService;

    // ê° í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „ í˜¸ì¶œëœë‹¤
    @BeforeEach
    public void beforeEach() {
        AppConfig appConfig = new AppConfig();
        memberService = appConfig.memberService();
    }

    ...
    }
}
```

4. OrderServiceTest ì½”ë“œ ìˆ˜ì •í•˜ê¸°

```java
...
public class OrderServiceTest {

    MemberService memberService;
    OrderService orderService;

    @BeforeEach
    public void beforeEach() {
        AppConfig appConfig = new AppConfig();
        memberService = appConfig.memberService();
        orderService = appConfig.orderService();
    }

    ...
}
```

- Run

![Untitled](img/AppConfigTest.png)

â†’ ì„±ê³µ !

- AppConfig ë¥¼ í†µí•´ ê´€ì‹¬ì‚¬ ë¶„ë¦¬
- AppConfig ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ì„ íƒ â†’ ì „ì²´ êµ¬ì„± ì±…ì„(ì• í”Œë¦¬ì¼€ì´ì…˜ ë™ì‘ ë°©ì‹)
- OrderServiceImpl ì€ ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# AppConfig ë¦¬íŒ©í„°ë§

- í˜„ì¬ AppConfig : **ì¤‘ë³µ** ë°œìƒ, **ì—­í• **ì— ë”°ë¥¸ **êµ¬í˜„** ë¶ˆëª…í™•

â¡ï¸ ì—­í• ì„ ë“œëŸ¬ë‚˜ê²Œ í•˜ëŠ” ê²ƒì´ ì¤‘ìš”

1. AppConfig ì½”ë“œ ìˆ˜ì •í•˜ê¸°

```java
...
public class AppConfig {
    // ìƒì„±ì ì£¼ì…
    public MemberService memberService() {
        // ctrl + alt + m ìœ¼ë¡œ ë³€ê²½
        return new MemberServiceImpl(memberRepository());
    }

    private MemoryMemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    private DiscountPolicy discountPolicy() {
        return new FixDiscountPolicy();
    }
}
```

- new MemoryMemberRepository() ì¤‘ë³µì´ ì œê±° â†’ MemoryMemberRepository ë¥¼ ë‹¤ë¥¸ êµ¬í˜„ì²´ë¡œ ë³€ê²½ ì‹œ í•œ ë¶€ë¶„ë§Œ ë³€ê²½í•˜ë©´ ë¨
- AppConfig ì—­í• ê³¼ êµ¬í˜„ í´ë˜ìŠ¤ ëª…í™• â¡ï¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ êµ¬ì„± ë¹ ë¥´ê²Œ íŒŒì•… ê°€ëŠ¥

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±… ì ìš©

- ì •ì•¡ í• ì¸ ì •ì±… â¡ï¸ ì •ë¥  í• ì¸ ì •ì±… ë³€ê²½í•˜ê¸°
- FixDiscountPolicy â†’ RateDiscountPolicy

â¡ï¸ AppConfig ë“±ì¥ : ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í¬ê²Œ ì‚¬ìš© ì˜ì—­ê³¼, ê°ì²´ë¥¼ ìƒì„±í•˜ê³  êµ¬ì„±í•˜ëŠ” ì˜ì—­ìœ¼ë¡œ ë¶„ë¦¬ë¨

- ì‚¬ìš©, êµ¬ì„±ì˜ ë¶„ë¦¬

![Untitled](img/ì‚¬ìš©êµ¬ì„±ë¶„ë¦¬.png)

- í• ì¸ ì •ì±…ì˜ ë³€ê²½

![Untitled](img/í• ì¸ì •ì±…ë³€ê²½.png)

â¡ï¸ FixDiscountPolicy â†’ RateDiscountPolicy ë³€ê²½ : êµ¬ì„± ì˜ì—­ì—ë§Œ ì˜í–¥, ì‚¬ìš© ì˜ì—­ì€ ì˜í–¥ X

1. AppConfig ì½”ë“œ ë³€ê²½í•˜ê¸°

```java
...
public class AppConfig {
    ...
    private DiscountPolicy discountPolicy() {
        // return new FixDiscountPolicy();
        return new RateDiscountPolicy();
    }
}
```

- AppConfig í• ì¸ ì •ì±… ì—­í•  êµ¬í˜„ ë‹´ë‹¹ : FixDiscountPolicy â†’ RateDiscountPolicy
- í• ì¸ ì •ì±…ì„ ë³€ê²½í•´ë„, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì„± ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ” AppConfig ë§Œ ë³€ê²½ (**ì‚¬ìš© ì˜ì—­**ì˜ ì–´ë–¤ ì½”ë“œë„ ë³€ê²½ X)
- **êµ¬ì„± ì˜ì—­**ì€ ë³€ê²½ë¨

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ì „ì²´ íë¦„ ì •ë¦¬

### ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ

- ë‹¤í˜•ì„± ë•ë¶„ì— ìƒˆë¡œìš´ ì •ë¥  í• ì¸ ì •ì±… ì½”ë“œë¥¼ ì¶”ê°€ë¡œ ê°œë°œí•˜ëŠ” ê²ƒì€ ë¬¸ì œ ì—†ìŒ

### ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì ìš©ê³¼ ë¬¸ì œì 

- ìƒˆë¡œ ê°œë°œí•œ ì •ë¥  í• ì¸ ì •ì±…ì„ ì ìš© ì‹œ â€œ**í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ**"ì¸ ì£¼ë¬¸ ì„œë¹„ìŠ¤ êµ¬í˜„ì²´ë„ í•¨ê»˜ ë³€ê²½ í•´ì•¼ í•¨
- ì£¼ë¬¸ ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸ê°€ ì¸í„°í˜ì´ìŠ¤ì¸ DiscountPolicy ë¿ë§Œ ì•„ë‹ˆë¼, êµ¬ì²´ í´ë˜ìŠ¤ì¸ FixDiscountPolicy ë„ í•¨ê»˜ ì˜ì¡´ â†’ **DIP ìœ„ë°˜**

### ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬

- ê¸°ì¡´ì—ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì˜ì¡´í•˜ëŠ” ì„œë²„ êµ¬í˜„ ê°ì²´ë¥¼ ì§ì ‘ ìƒì„±, ì‹¤í–‰
- ê¸°íšìì¸ AppConfig ë“±ì¥
- AppConfig ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì²´ ë™ì‘ ë°©ì‹ì„ êµ¬ì„±í•˜ê¸° ìœ„í•´, **êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±**í•˜ê³ , **ì—°ê²°**í•˜ëŠ” ì±…ì„
- ì´ì œë¶€í„° í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ìì‹ ì˜ ì—­í• ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒë§Œ ì§‘ì¤‘, ê¶Œí•œì´ ì¤„ì–´ë“¦ (ì±…ì„ì´ ëª…í™•í•´ì§)

### AppConfig ë¦¬íŒ©í„°ë§

- êµ¬ì„± ì •ë³´ì—ì„œ ì—­í• ê³¼ êµ¬í˜„ì„ ëª…í™•í•˜ê²Œ ë¶„ë¦¬
- ì—­í• ì´ ì˜ ë“œëŸ¬ë‚¨
- ì¤‘ë³µ ì œê±°

### ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±… ì ìš©

- ì •ì±… í• ì¸ ì •ì±… â†’ ì •ë¥  í• ì¸ ì •ì±…ìœ¼ë¡œ ë³€ê²½
- AppConfigì˜ ë“±ì¥ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í¬ê²Œ ì‚¬ìš© ì˜ì—­ê³¼, ê°ì²´ë¥¼ ìƒì„±í•˜ê³  êµ¬ì„±í•˜ëŠ” ì˜ì—­ìœ¼ë¡œ ë¶„ë¦¬ë¨
- í• ì¸ ì •ì±…ì„ ë³€ê²½í•´ë„ AppConfig ê°€ ìˆëŠ” êµ¬ì„± ì˜ì—­ë§Œ ë³€ê²½, ì‚¬ìš© ì˜ì—­ì€ ë³€ê²½ x

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ 5ê°€ì§€ ì›ì¹™ì˜ ì ìš©

- ì—¬ê¸°ì„œëŠ” 3ê°€ì§€ SRP, DIP, OCP ê°€ ì ìš©ë˜ì–´ ìˆìŒ

### SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™

> í•œ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì ¸ì•¼ í•œë‹¤

- í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì§ì ‘ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ê³ , ì‹¤í–‰í•˜ëŠ” ë‹¤ì–‘í•œ ì±…ì„ì„ ê°€ì§€ê³  ìˆìŒ
- SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ë”°ë¥´ë©´ì„œ ê´€ì‹¬ì‚¬ ë¶„ë¦¬
- êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì±…ì„ì€ AppConfig ê°€ ë‹´ë‹¹
- í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ë‹´ë‹¹

### DIP ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™

> í”„ë¡œê·¸ë˜ë¨¸ëŠ” â€œì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ì§€, êµ¬ì²´í™”ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤â€
ì˜ì¡´ì„± ì£¼ì…ì€ ì´ ì›ì¹™ì„ ë”°ë¥´ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ë‹¤

- ê¸°ì¡´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ : DiscountPolicy ì¸í„°í˜ì´ìŠ¤ + FixDiscountPolicy êµ¬ì²´í™” í´ë˜ìŠ¤ ì˜ì¡´
- í´ë¼ì´ì–¸íŠ¸ ì½”ë“œê°€ DiscountPolicy ì¶”ìƒí™” ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì½”ë“œ ë³€ê²½
- í•˜ì§€ë§Œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ì¸í„°í˜ì´ìŠ¤ë§Œìœ¼ë¡œëŠ” ì‹¤í–‰ ë¶ˆê°€
- AppConfig ê°€ FixDiscountPolicy ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ëŒ€ì‹  ìƒì„±í•œ í›„ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì˜ì¡´ ê´€ê³„ ì£¼ì…

### OCP

> ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” í™•ì¥ì—ëŠ” ì—´ë ¤ ìˆìœ¼ë‚˜ ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤

- ë‹¤í˜•ì„± ì‚¬ìš©í•˜ê³  í´ë¼ì´ì–¸íŠ¸ê°€ DIP ë¥¼ ì§€í‚´
- ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš© ì˜ì—­ê³¼ êµ¬ì„± ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ”
- AppConfig ê°€ ì˜ì¡´ê´€ê³„ë¥¼ FixDiscountPolicy â†’ RateDiscountPolicy ë¡œ ë³€ê²½í•´ì„œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì£¼ì…í•˜ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ë¨
- **ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†Œë¥¼ ìƒˆë¡­ê²Œ í™•ì¥í•´ë„ ì‚¬ìš© ì˜ì—­ì˜ ë³€ê²½ì€ ë‹«í˜€ ìˆìŒ**

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# IoC, DI, ê·¸ë¦¬ê³  ì»¨í…Œì´ë„ˆ

### ì œì–´ì˜ ì—­ì „ IoC (Inversion of Control)

> í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ì§ì ‘ ì œì–´í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì™¸ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒ

- ê¸°ì¡´ í”„ë¡œê·¸ë¨ : í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„ ê°ì²´ê°€ ìŠ¤ìŠ¤ë¡œ í•„ìš”í•œ ì„œë²„ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ê³  ì‹¤í–‰ ( êµ¬í˜„ ê°ì²´ê°€ í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ìŠ¤ìŠ¤ë¡œ ì¡°ì¢… )
- AppConfig ë“±ì¥ ì´í›„ : êµ¬í˜„ ê°ì²´ëŠ” ìì‹ ì˜ ë¡œì§ì„ ì‹¤í–‰í•˜ëŠ” ì—­í• ë§Œ ë‹´ë‹¹ ( í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì€ AppConfig ë‹´ë‹¹ )
  - ex. OrderServiceImpl : í•„ìš”í•œ ì¸í„°í˜ì´ìŠ¤ë“¤ì„ í˜¸ì¶œí•˜ì§€ë§Œ ì–´ë–¤ êµ¬í˜„ ê°ì²´ë“¤ì´ ì‹¤í–‰ë ì§€ ëª¨ë¥¸ë‹¤
- AppConfig
  - í”„ë¡œê·¸ë¨ ì œì–´ íë¦„ì— ëŒ€í•œ ê¶Œí•œ
  - OrderServiceImpl ìƒì„±
  - OrderService ì¸í„°í˜ì´ìŠ¤ì˜ ë‹¤ë¥¸ êµ¬í˜„ ê°ì²´ ìƒì„± ë° ì‹¤í–‰

- í”„ë ˆì„ì›Œí¬ vs. ë¼ì´ë¸ŒëŸ¬ë¦¬
  - í”„ë ˆì„ì›Œí¬ : ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ì œì–´í•˜ê³ , ëŒ€ì‹  ì‹¤í–‰ (ex. JUnit)
  - ë¼ì´ë¸ŒëŸ¬ë¦¬ : ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œê°€ ì§ì ‘ ì œì–´ì˜ íë¦„ì„ ë‹´ë‹¹


### ì˜ì¡´ ê´€ê³„ ì£¼ì… DI (Dependency Injection)

- OrderServiceImpl : DiscountPolicy ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´, ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ì‚¬ìš©ë ì§€ëŠ” ëª¨ë¦„
- ì˜ì¡´ ê´€ê³„ : ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ ê´€ê³„ or ì‹¤í–‰ ì‹œì ì— ê²°ì •ë˜ëŠ” ë™ì ì¸ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤) ì˜ì¡´ ê´€ê³„

- ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ ê´€ê³„
  - í´ë˜ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” import ì½”ë“œë§Œ ë³´ê³  ì˜ì¡´ê´€ê³„ ì‰½ê²Œ íŒŒì•… ê°€ëŠ¥ (ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ì§€ ì•Šì•„ë„ ë¶„ì„ ê°€ëŠ¥)
  - OrderServiceImpl -(ì˜ì¡´)â†’ MemberRepository, DiscountPolicy

![Untitled](img/ì •ì ì¸_í´ë˜ìŠ¤_ì˜ì¡´ê´€ê³„.png)

- ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ ê´€ê³„
  - ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì—ì„œ ì‹¤ì œ ìƒì„±ëœ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°ê°€ ì—°ê²°ëœ ì˜ì¡´ ê´€ê³„
  - ì˜ì¡´ ê´€ê³„ ì£¼ì… : ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì— ì™¸ë¶€ì—ì„œ ì‹¤ì œ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•˜ì—¬, í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ì‹¤ì œ ì˜ì¡´ ê´€ê³„ê°€ ì—°ê²°ë˜ëŠ” ê²ƒ
  - ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± í›„, ê·¸ ì°¸ì¡°ê°’ì„ ì „ë‹¬í•´ì„œ ì—°ê²°
  - ì˜ì¡´ê´€ê³„ ì£¼ì… ì‚¬ìš© ì‹œ
    - í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ë³€ê²½ X â†’ í´ë¼ì´ì–¸íŠ¸ê°€ í˜¸ì¶œí•˜ëŠ” ëŒ€ìƒì˜ íƒ€ì… ì¸ìŠ¤í„´ìŠ¤ ë³€ê²½
    - â­ ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ ê´€ê³„ ë³€ê²½ X â†’ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ ê´€ê³„ ì‰½ê²Œ ë³€ê²½

![Untitled](img/ë™ì ì¸_ê°ì²´_ì˜ì¡´ê´€ê³„.png)

### IoC ì»¨í…Œì´ë„ˆ, DI ì»¨í…Œì´ë„ˆ

- AppConfig ì²˜ëŸ¼ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ë©´ì„œ ì˜ì¡´ ê´€ê³„ë¥¼ ì—°ê²°í•´ì£¼ëŠ” ê²ƒ
- ì˜ì¡´ ê´€ê³„ ì£¼ì…ì— ì´ˆì ì„ ë§ì¶”ì–´ ìµœê·¼ì—ëŠ” ì£¼ë¡œ DI ì»¨í…Œì´ë„ˆë¼ í•¨
- ë˜ëŠ” ì–´ìƒ˜ë¸”ëŸ¬, ì˜¤ë¸Œì íŠ¸ íŒ©í† ë¦¬ ë“±ìœ¼ë¡œ ë¶ˆë¦¼

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ìŠ¤í”„ë§ìœ¼ë¡œ ì „í™˜í•˜ê¸°

1. AppConfig ì½”ë“œ ë³€ê²½í•˜ê¸°

```java
...
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class AppConfig {

    @Bean
    public MemberService memberService() {...}

    @Bean
    public MemoryMemberRepository memberRepository() {...}

    @Bean
    public OrderService orderService() {...}

    @Bean
    public DiscountPolicy discountPolicy() {...}
}
```

2. MemberApp ì½”ë“œ ë³€ê²½í•˜ê¸°

```java
...
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class MemberApp {
    public static void main(String[] args) {
        // AppConfig appConfig = new AppConfig();
        // MemberService memberService = appConfig.memberService();

        ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
        MemberService memberService = applicationContext.getBean("memberService", MemberService.class);

        ...
    }
}
```

- Run

![Untitled](img/ìŠ¤í”„ë§_ì „í™˜.png)

3. OrderApp ì½”ë“œ ë³€ê²½í•˜ê¸°

```java
...
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class OrderApp {
    public static void main(String[] args) {

        // AppConfig appConfig = new AppConfig();
        // MemberService memberService = appConfig.memberService();
        // OrderService orderService = appConfig.orderService();

        ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
        MemberService memberService = applicationContext.getBean("memberService", MemberService.class);
        OrderService orderService = applicationContext.getBean("orderService", OrderService.class);

        ...
    }
}
```

- Run

![Untitled](img/ìŠ¤í”„ë§_ì „í™˜2.png)

### ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ

- ApplicationContext = ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ
- @Configuration ì´ ë¶™ì€ AppConfig ë¥¼ ì„¤ì •(êµ¬ì„±) ì •ë³´ë¡œ ì‚¬ìš©
- @Bean ì´ ì íŒ ë©”ì„œë“œë¥¼ ëª¨ë‘ í˜¸ì¶œí•´ ë°˜í™˜ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ â†’ ìŠ¤í”„ë§ ë¹ˆ
- ìŠ¤í”„ë§ ë¹ˆ ì´ë¦„ : @Bean ì´ ë¶™ì€ ë©”ì„œë“œ ëª… (ex. memberService, orderService)
- ìŠ¤í”„ë§ ë¹ˆ ì°¾ê¸° : applicationContext.getBean() ë©”ì„œë“œ ì‚¬ìš©

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ğŸ¾ğŸ¾ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ ë¹ˆğŸ¾ğŸ¾

# ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±

â˜‘ï¸ ì»¨í…Œì´ë„ˆ : ì‚¬ìš©í•˜ëŠ” ê°ì²´ë“¤ì„ ë‹´ê³  ìˆìŒ

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ë˜ëŠ” ê³¼ì •

```java
ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
```

â†’ ApplicationContext : ì¸í„°í˜ì´ìŠ¤, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ

â†’ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ë§Œë“œëŠ” ë°©ë²• : XML ê¸°ë°˜, ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ ìë°” ì„¤ì • í´ë˜ìŠ¤

â†’ AppConfig ì‚¬ìš©í–ˆë˜ ë°©ì‹ : ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ ìë°” ì„¤ì • í´ë˜ìŠ¤

- ìë°” ì„¤ì • í´ë˜ìŠ¤ ê¸°ë°˜ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ(ApplicationContext) ë§Œë“¤ê¸°
  - êµ¬í˜„ì²´ : new AnnotationConfigApplicationContext(AppConfig.class);

> ì°¸ê³  : ì •í™•íˆëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ë¶€ë¥¼ ë•Œ BeanFactory, ApplicationContext ë¡œ êµ¬ë¶„í•´ì„œ ì´ì•¼ê¸°í•œë‹¤. BeanFactory ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” ê±°ì˜ ì—†ìœ¼ë©°, ì¼ë°˜ì ìœ¼ë¡œ ApplicationContext ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ í•œë‹¤.
>

## ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± ê³¼ì •

### 1. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±

![Untitled](img/ìŠ¤í”„ë§_ì»¨í…Œì´ë„ˆ_ìƒì„±.png)

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± ì‹œ êµ¬ì„± ì •ë³´ ì§€ì • : AppConfig.class

### 2. ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡

![Untitled](img/ìŠ¤í”„ë§_ë¹ˆ_ë“±ë¡.png)

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ì˜¨ ì„¤ì • í´ë˜ìŠ¤ ì •ë³´ë¥¼ ì´ìš©í•´ ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡
- ë¹ˆ ì´ë¦„ = ë©”ì„œë“œ ì´ë¦„
- ë¹ˆ ì´ë¦„ ì§ì ‘ ë¶€ì—¬ ê°€ëŠ¥ (ex. @Bean(name=â€memberService2â€))

> ì£¼ì˜ : ë¹ˆ ì´ë¦„ì€ í•­ìƒ ë‹¤ë¥¸ ì´ë¦„ì„ ë¶€ì—¬í•´ì•¼ í•œë‹¤. ê°™ì€ ì´ë¦„ ë¶€ì—¬ ì‹œ, ë‹¤ë¥¸ ë¹ˆì´ ë¬´ì‹œë˜ê±°ë‚˜, ê¸°ì¡´ ë¹ˆì„ ë®ì–´ë²„ë¦¬ê±°ë‚˜, ì„¤ì •ì— ë”°ë¼ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.
>

### 3. ìŠ¤í”„ë§ ë¹ˆ ì˜ì¡´ê´€ê³„ ì„¤ì • - ì¤€ë¹„

![Untitled](img/ìŠ¤í”„ë§_ë¹ˆ_ì˜ì¡´ê´€ê³„_ì¤€ë¹„.png)

### 4. ìŠ¤í”„ë§ ë¹ˆ ì˜ì¡´ê´€ê³„ ì„¤ì • - ì™„ë£Œ

![Untitled](img/ìŠ¤í”„ë§_ë¹ˆ_ì˜ì¡´ê´€ê³„_ì™„ë£Œ.png)

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì„¤ì • ì •ë³´ë¥¼ ì°¸ê³ í•˜ì—¬ ì˜ì¡´ê´€ê³„ ì£¼ì… (DI)

> ì°¸ê³  : ìŠ¤í”„ë§ì€ ë¹ˆì„ ìƒì„±í•˜ê³ , ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë‹¨ê³„ê°€ ë‚˜ëˆ„ì–´ì ¸ ìˆë‹¤. ê·¸ëŸ°ë° ì´ë ‡ê²Œ ìë°” ì½”ë“œë¡œ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•˜ë©´ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ ì£¼ì…ë„ í•œ ë²ˆì— ì²˜ë¦¬ëœë‹¤. (ì´í•´ë¥¼ ìœ„í•œ ì„¤ê³„)
>

> ì •ë¦¬ : ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ê³ , ì„¤ì •(êµ¬ì„±) ì •ë³´ë¥¼ ì°¸ê³ í•´ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•˜ê³ , ì˜ì¡´ê´€ê³„ë¥¼ ì„¤ì •í–ˆë‹¤.
>

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì¡°íšŒ

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì‹¤ì œë¡œ ìŠ¤í”„ë§ ë¹ˆì´ ë“±ë¡ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸°

1. test/java/hello.core ì— beanfind ì´ë¦„ì˜ Package ìƒì„±
2. ë§Œë“  beanfind íŒ¨í‚¤ì§€ì— ApplicationContextInfoTest ì´ë¦„ì˜ Class ìƒì„±

### ëª¨ë“  ë¹ˆ ì¶œë ¥í•˜ê¸°

â¡ï¸ ì‹¤í–‰ ì‹œ ìŠ¤í”„ë§ì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì •ë³´ ì¶œë ¥ ê°€ëŠ¥

â¡ï¸ ac.getBeanDefinitionNames() : ìŠ¤í”„ë§ì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì´ë¦„ ì¡°íšŒ

â¡ï¸ ac.getBean() : ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë¹ˆ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤) ì¡°íšŒ

```java
package hello.core.beanfind;

import hello.core.AppConfig;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class ApplicationContextInfoTest {

    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

    @Test
    @DisplayName("ëª¨ë“  ë¹ˆ ì¶œë ¥í•˜ê¸°")
    void findAllBean() {
        String[] beanDefinitionNames = ac.getBeanDefinitionNames();
        // iter : ë¦¬ìŠ¤íŠ¸/ë°°ì—´ forë¬¸ ìë™ ìƒì„±
        for (String beanDefinitionName : beanDefinitionNames) {
            Object bean = ac.getBean(beanDefinitionName);
            System.out.println("name = " + beanDefinitionName + " object = " + bean);
        }
    }
}
```

- ì¶œë ¥ ê²°ê³¼

![Untitled](img/ëª¨ë“ _ë¹ˆ_ì¶œë ¥í•˜ê¸°.png)

### ì§ì ‘ ë§Œë“  ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆë§Œ ì¶œë ¥í•˜ê¸°

â¡ï¸ ë‚´ê°€ ë“±ë¡í•œ ë¹ˆë§Œ ì¶œë ¥ (ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆì„ ì œì™¸)

â¡ï¸ getRole() : ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆ êµ¬ë¶„ (ROLE_APPLICATION/ROLE_INFRASTRUCTURE)

```java
...
public class ApplicationContextInfoTest {

    ...

    @Test
    @DisplayName("ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ì¶œë ¥í•˜ê¸°")
    void findApplicationBean() {
        String[] beanDefinitionNames = ac.getBeanDefinitionNames();
        for (String beanDefinitionName : beanDefinitionNames) {
            // BeanDefinition : ë¹ˆì— ëŒ€í•œ ë©”íƒ€ë°ì´í„°
            BeanDefinition beanDefinition = ac.getBeanDefinition(beanDefinitionName);

            // ROLE_APPLICATION : ë‚´ê°€ ë“±ë¡í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ or ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬
            // ROLE_INFRASTRUCTURE : ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆ
            if (beanDefinition.getRole() == beanDefinition.ROLE_APPLICATION) {
                Object bean = ac.getBean(beanDefinitionName);
                System.out.println("name = " + beanDefinitionName + " object = " + bean);
            }
        }
    }
}
```

- ì¶œë ¥ ê²°ê³¼

![Untitled](img/ì• í”Œë¦¬ì¼€ì´ì…˜_ë¹ˆ_ì¶œë ¥í•˜ê¸°.png)

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ê¸°ë³¸

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ì¡°íšŒ ë°©ë²•

â˜‘ï¸ ac.getBean(ë¹ˆì´ë¦„, íƒ€ì…)

â˜‘ï¸ ac.getBean(íƒ€ì…)

ğŸ’¡ ì¡°íšŒ ëŒ€ìƒ ìŠ¤í”„ë§ ë¹ˆì´ ì—†ìœ¼ë©´ ì˜ˆì™¸ ë°œìƒ

- â€˜NoSuchBeanDefinitionException : No bean named â€˜xxxxâ€™ availableâ€™

1. test/java/hello.core/beanfind íŒ¨í‚¤ì§€ì— ApplicationContextBasicFindTest ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core.beanfind;

import hello.core.AppConfig;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.NoSuchBeanDefinitionException;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

import static org.assertj.core.api.Assertions.assertThat;
import static org.junit.jupiter.api.Assertions.assertThrows;

public class ApplicationContextBasicFindTest {

    // Ctrl + E (Window) : ì´ì „ ì½”ë“œë¡œ ë°”ë¡œê°€ê¸°
    // Command + E (Linux)
    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

    @Test
    @DisplayName("ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒ")
    void findBeanByName() {
        MemberService memberService = ac.getBean("memberService", MemberService.class);

        // ê²€ì¦ - Assertions (org.junit)
        assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
    }

    @Test
    @DisplayName("ì´ë¦„ ì—†ì´ íƒ€ì…ìœ¼ë¡œë§Œ ì¡°íšŒ")
    void findBeanByType() {
        MemberService memberService = ac.getBean(MemberService.class);
        assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
    }

    @Test
    @DisplayName("êµ¬ì²´ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ")
    void findBeanByName2() {
        // ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ë¡œ ì§ì ‘ ì¡°íšŒ - ì¢‹ì§€ ì•Šì€ ë°©ë²•
        MemberService memberService = ac.getBean("memberService", MemberServiceImpl.class);
        assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
    }

    // ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸ ë§Œë“¤ê¸°
    @Test
    @DisplayName("ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒX")
    void findBeanByNameX() {
        // ac.getBean("xxxx", MemberService.class);
        assertThrows(NoSuchBeanDefinitionException.class,
                () -> ac.getBean("xxxx", MemberService.class));
    }
}
```

- í…ŒìŠ¤íŠ¸ ê²°ê³¼

![Untitled](img/ìŠ¤í”„ë§_ë¹ˆ_ì¡°íšŒ_ê¸°ë³¸.png)

â†’ ì„±ê³µ !

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ë™ì¼í•œ íƒ€ì…ì´ ë‘˜ ì´ìƒ

- íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ ì‹œ ê°™ì€ íƒ€ì…ì˜ ìŠ¤í”„ë§ ë¹ˆì´ ë‘˜ ì´ìƒì´ë©´ ì˜¤ë¥˜ ë°œìƒ â†’ ë¹ˆ ì´ë¦„ ì§€ì •
- ac.getBeansOfType() : í•´ë‹¹ íƒ€ì…ì˜ ëª¨ë“  ë¹ˆ ì¡°íšŒ ê°€ëŠ¥

1. test/java/hello.core/beanfind íŒ¨í‚¤ì§€ì— ApplicationContextSameBeanFindTest ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core.beanfind;

import hello.core.member.MemberRepository;
import hello.core.member.MemoryMemberRepository;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.NoUniqueBeanDefinitionException;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import java.util.Map;

import static org.assertj.core.api.Assertions.assertThat;
import static org.junit.jupiter.api.Assertions.assertThrows;

public class ApplicationContextSameBeanFindTest {

    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(SameBeanConfig.class);

    @Test
    @DisplayName("íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ ì‹œ ê°™ì€ íƒ€ì…ì´ ë‘˜ ì´ìƒì´ë©´ ì¤‘ë³µ ì˜¤ë¥˜ ë°œìƒ")
    void findBeanByTypeDuplicate() {
        assertThrows(NoUniqueBeanDefinitionException.class,
                () -> ac.getBean(MemberRepository.class));
    }

    @Test
    @DisplayName("íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ ì‹œ ê°™ì€ íƒ€ì…ì´ ë‘˜ ì´ìƒì´ë©´ ë¹ˆ ì´ë¦„ì„ ì§€ì •")
    void findBeanByName() {
        MemberRepository memberRepository = ac.getBean("memberRepository1", MemberRepository.class);
        assertThat(memberRepository).isInstanceOf(MemberRepository.class);
    }

    @Test
    @DisplayName("íŠ¹ì • íƒ€ì… ëª¨ë‘ ì¡°íšŒ")
    void findAllBeanByType() {
        Map<String, MemberRepository> beansOfType = ac.getBeansOfType(MemberRepository.class);
        for (String key : beansOfType.keySet()) {
            System.out.println("key = " + key + " value = " + beansOfType.get(key));
        }
        System.out.println("beansOfType = " + beansOfType);
        assertThat(beansOfType.size()).isEqualTo(2);
    }

    // static class ì„ ì–¸ : ApplicationContextSameBeanFindTest ì•ˆì—ì„œë§Œ ì‚¬ìš©í•  í´ë˜ìŠ¤ë¼ëŠ” ì˜ë¯¸
    @Configuration
    static class SameBeanConfig {

        @Bean
        public MemberRepository memberRepository1() {
            return new MemoryMemberRepository();
        }

        @Bean
        public MemberRepository memberRepository2() {
            return new MemoryMemberRepository();
        }

    }
}
```

- í…ŒìŠ¤íŠ¸ ê²°ê³¼

![Untitled](img/ApplicationContextSameBeanFindTest.png)

â†’ ì„±ê³µ !

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# â­â­â­ ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ìƒì†ê´€ê³„

- ë¶€ëª¨ íƒ€ì… ì¡°íšŒ ì‹œ, ìì‹ íƒ€ì…ë„ í•¨ê»˜ ì¡°íšŒë¨
- ëª¨ë“  ìë°” ê°ì²´ì˜ ìµœê³  ë¶€ëª¨ì¸ Object íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ ì‹œ, ëª¨ë“  ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ ê°€ëŠ¥

1. test/java/hello.core/beanfind íŒ¨í‚¤ì§€ì— ApplicationContextExtendsFindTest ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core.beanfind;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.discount.RateDiscountPolicy;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.NoUniqueBeanDefinitionException;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import java.util.Map;

import static org.assertj.core.api.Assertions.assertThat;
import static org.junit.jupiter.api.Assertions.assertThrows;

public class ApplicationContextExtendsFindTest {

    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(TestConfig.class);

    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ ì‹œ ìì‹ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ì¤‘ë³µ ì˜¤ë¥˜ ë°œìƒ")
    void findBeanByParentTypeDuplicate() {
        assertThrows(NoUniqueBeanDefinitionException.class,
                () -> ac.getBean(DiscountPolicy.class));
    }

    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ ì‹œ ìì‹ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ë¹ˆ ì´ë¦„ ì§€ì •")
    void findBeanByParentTypeBeanName() {
        DiscountPolicy rateDiscountPolicy = ac.getBean("rateDiscountPolicy", DiscountPolicy.class);
        assertThat(rateDiscountPolicy).isInstanceOf(RateDiscountPolicy.class);
    }

    @Test
    @DisplayName("íŠ¹ì • í•˜ìœ„ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ")
    void findBeanBySubType() {
        RateDiscountPolicy bean = ac.getBean(RateDiscountPolicy.class);
        assertThat(bean).isInstanceOf(RateDiscountPolicy.class);
    }

    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ëª¨ë‘ ì¡°íšŒ")
    void findAllBeanByParentType() {
        Map<String, DiscountPolicy> beansOfType = ac.getBeansOfType(DiscountPolicy.class);
        assertThat(beansOfType.size()).isEqualTo(2);
        for (String key : beansOfType.keySet()) {
            System.out.println("key = " + key + "value = " + beansOfType.get(key));
        }
    }

    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ëª¨ë‘ ì¡°íšŒ - Object")
    void findAllBeanByObjectType() {
        Map<String, Object> beansOfType = ac.getBeansOfType(Object.class);
        for (String key : beansOfType.keySet()) {
            System.out.println("key = " + key + "value = " + beansOfType.get(key));
        }
    }

    @Configuration
    static class TestConfig {
        @Bean
        public DiscountPolicy rateDiscountPolicy() {
            return new RateDiscountPolicy();
        }

        @Bean
        public DiscountPolicy fixDiscountPolicy() {
            return new FixDiscountPolicy();
        }
    }
}
```

- í…ŒìŠ¤íŠ¸ ê²°ê³¼

![Untitled](img/ApplicationContextExtendsFindTest.png)

â†’ ì„±ê³µ !

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# BeanFactory ì™€ ApplicationContext

![Untitled](img/BeanFactory&ApplicationContext.png)

## BeanFactory

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ìµœìƒìœ„ ì¸í„°í˜ì´ìŠ¤
- ìŠ¤í”„ë§ ë¹ˆì„ ê´€ë¦¬í•˜ê³  ì¡°íšŒí•˜ëŠ” ì—­í• 
- getBean() ì œê³µ
- ì§€ê¸ˆê¹Œì§€ ì‚¬ìš©í–ˆë˜ ëŒ€ë¶€ë¶„ì˜ ê¸°ëŠ¥ì€ BeanFactory ê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥

## ApplicationContext

- BeanFactory ì˜ ê¸°ëŠ¥ì„ ëª¨ë‘ ìƒì†ë°›ì•„ ì œê³µ (BeanFactory ê¸°ëŠ¥ + É‘)

### ApplicationContext ê°€ ì œê³µí•˜ëŠ” ë¶€ê°€ê¸°ëŠ¥

![Untitled](img/ApplicationContext.png)

- **MessageSource** : ë©”ì‹œì§€ì†ŒìŠ¤ë¥¼ í™œìš©í•œ êµ­ì œí™” ê¸°ëŠ¥ (ex. í•œêµ­ì—ì„œ ë“¤ì–´ì˜¤ë©´ í•œêµ­ì–´, ì˜ì–´ê¶Œì—ì„œ ë“¤ì–´ì˜¤ë©´ ì˜ì–´ë¡œ ì¶œë ¥)
- **EnvironmentCapable** : í™˜ê²½ë³€ìˆ˜ (ë¡œì»¬, ê°œë°œ, ìš´ì˜ ë“±ì„ êµ¬ë¶„í•´ì„œ ì²˜ë¦¬)
- **ApplicationEventPublisher** : ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë²¤íŠ¸ (ì´ë²¤íŠ¸ ë°œí–‰&êµ¬ë… ëª¨ë¸ í¸ë¦¬í•˜ê²Œ ì§€ì›)
- **ResourceLoader** : í¸ë¦¬í•œ ë¦¬ì†ŒìŠ¤ ì¡°íšŒ (íŒŒì¼, í´ë˜ìŠ¤íŒ¨ìŠ¤, ì™¸ë¶€ ë“±ì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ í¸ë¦¬í•˜ê²Œ ì¡°íšŒ)

> **ì •ë¦¬**
> - ApplicationContext ëŠ” BeanFactory ì˜ ê¸°ëŠ¥ì„ ìƒì†ë°›ëŠ”ë‹¤
> - ApplicationContext ëŠ” ë¹ˆ ê´€ë¦¬ ê¸°ëŠ¥ + í¸ë¦¬í•œ ë¶€ê°€ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤
> - BeanFactory ë¥¼ ì§ì ‘ ì‚¬ìš©í•  ì¼ì€ ê±°ì˜ ì—†ë‹¤ (ë¶€ê°€ ê¸°ëŠ¥ì´ í¬í•¨ëœ ApplicationContext ì‚¬ìš©)
> - BeanFactory ë‚˜ ApplicationContext ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ í•œë‹¤
>

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ë‹¤ì–‘í•œ ì„¤ì • í˜•ì‹ ì§€ì› - ìë°” ì½”ë“œ, XML

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ë‹¤ì–‘í•œ í˜•ì‹ì˜ ì„¤ì • ì •ë³´ë¥¼ ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆê²Œ ìœ ì—°í•˜ê²Œ ì„¤ê³„ë˜ì–´ ìˆìŒ
  - ìë°” ì½”ë“œ, XML, Groovy â€¦

![Untitled](img/ë‹¤ì–‘í•œ_ì„¤ì •_í˜•ì‹_ì§€ì›.png)

## ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ ìë°” ì½”ë“œ ì„¤ì • ì‚¬ìš©

- ì§€ê¸ˆê¹Œì§€ í–ˆë˜ ê²ƒ
- new AnnotationConfigApplicationContext(AppConfig.class)
- AnnotationConfigApplicationContext í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ìë°” ì½”ë“œë¡œ ëœ ì„¤ì • ì •ë³´ë¥¼ ë„˜ê¹€

## XML ì„¤ì • ì‚¬ìš©

- ìµœê·¼ì—ëŠ” ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ (ìŠ¤í”„ë§ ë¶€íŠ¸ ì˜í–¥)
- ì»´íŒŒì¼ ì—†ì´ ë¹ˆ ì„¤ì • ì •ë³´ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ì¥ì 
- GenericXmlApplicationContext í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ xml ì„¤ì • ì •ë³´ë¥¼ ë„˜ê¹€

1. main/resources ì— appConfig.xml íŒŒì¼ ìƒì„±

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="memberService" class="hello.core.member.MemberServiceImpl">
        <constructor-arg name="memberRepository" ref="memberRepository" />
    </bean>

    <bean id="memberRepository" class="hello.core.member.MemoryMemberRepository" />

    <bean id="orderService" class="hello.core.order.OrderServiceImpl">
        <constructor-arg name="memberRepository" ref="memberRepository" />
        <constructor-arg name="discountPolicy" ref="discountPolicy" />
    </bean>

    <bean id="discountPolicy" class="hello.core.discount.RateDiscountPolicy" />

</beans>
```

â¡ï¸ xml ê¸°ë°˜ì˜ appConfig.xml ìŠ¤í”„ë§ ì„¤ì • ì •ë³´ â‰’ ìë°” ì½”ë“œë¡œ ëœ [AppConfig.java](http://AppConfig.java) ì„¤ì • ì •ë³´

2. test/java/hello.core ì— xml ì´ë¦„ì˜ Package ìƒì„±
3. ë§Œë“  xml íŒ¨í‚¤ì§€ì— XmlAppContext ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core.xml;

import hello.core.member.MemberService;
import org.junit.jupiter.api.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.GenericXmlApplicationContext;

import static org.assertj.core.api.Assertions.assertThat;

public class XmlAppContext {

    @Test
    void xmlAppContext() {
        ApplicationContext ac = new GenericXmlApplicationContext("appConfig.xml");
        MemberService memberService = ac.getBean("memberService", MemberService.class);
        assertThat(memberService).isInstanceOf(MemberService.class);
    }
}
```

- í…ŒìŠ¤íŠ¸ ê²°ê³¼

![Untitled](img/XmlAppContext.png)

â†’ ì„±ê³µ !

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ìŠ¤í”„ë§ ë¹ˆ ì„¤ì • ë©”íƒ€ ì •ë³´ - BeanDefinition

- Bean ì •ë³´ì— ëŒ€í•œ ì¶”ìƒí™” (Bean ì„¤ì • ë©”íƒ€ ì •ë³´) : BeanDefinition
  - @Bean, <bean> ë‹¹ ê°ê° í•˜ë‚˜ì”© ë©”íƒ€ ì •ë³´ê°€ ìƒì„±ë¨
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ë©”íƒ€ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆ ìƒì„±

![Untitled](img/BeanDefinition.png)

- ì½”ë“œ ë ˆë²¨ë¡œ í™•ì¥

![Untitled](img/BeanDefinitionì½”ë“œë ˆë²¨.png)

â¡ï¸ AnnotationConfigApplicationContext ëŠ” AnnotatedBeanDefinitionReder ë¥¼ ì‚¬ìš©í•´ AppConfig.class ë¥¼ ì½ê³  BeanDefinition ìƒì„±

â¡ï¸ GenericXmlApplicationContext ëŠ” XmlBeanDefinitionReader ë¥¼ ì‚¬ìš©í•´ appConfig.xml ë¥¼ ì½ê³  BeanDefinition ìƒì„±

â¡ï¸ ìƒˆë¡œìš´ í˜•ì‹ì˜ ì„¤ì • ì •ë³´ê°€ ì¶”ê°€ë  ì‹œ, ~BeanDefinitionReader ë¥¼ ë§Œë“¤ì–´ì„œ BeanDefinition ìƒì„±

## BeanDefinition ì‚´í´ë³´ê¸°

1. test/java/hellocore ì— beandefinition ì´ë¦„ì˜ Package ìƒì„±
2. ë§Œë“  beandefinition íŒ¨í‚¤ì§€ì— BeanDefinitionTest ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core.beandefinition;

import hello.core.AppConfig;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.config.BeanDefinition;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class BeanDefinitionTest {

   AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

   @Test
   @DisplayName("ë¹ˆ ì„¤ì • ë©”íƒ€ ì •ë³´ í™•ì¸")
   void findApplicationBean() {
       String[] beanDefinitionNames = ac.getBeanDefinitionNames();
       for (String beanDefinitionName : beanDefinitionNames) {
           BeanDefinition beanDefinition = ac.getBeanDefinition(beanDefinitionName);

           if (beanDefinition.getRole() == BeanDefinition.ROLE_APPLICATION) {
               System.out.println("beanDefinitionName = " + beanDefinitionName +
                       " beanDefinition = " + beanDefinition);
           }
       }
   }
}
```

- í…ŒìŠ¤íŠ¸ ê²°ê³¼

![Untitled](img/BeanDefinitionTest.png)

â†’ ì„±ê³µ !

> **ì •ë¦¬**
> - BeanDefinition ì„ ì§ì ‘ ìƒì„±í•´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ì‹¤ë¬´ì—ì„œ ì§ì ‘ ì •ì˜í•˜ê±°ë‚˜ ì‚¬ìš©í•  ì¼ì€ ê±°ì˜ ì—†ë‹¤.
> - BeanDefinition ì— ëŒ€í•´ ë„ˆë¬´ ê¹Šì´ ìˆê²Œ ì´í•´í•˜ê¸° ë³´ë‹¤, ìŠ¤í”„ë§ì´ ë‹¤ì–‘í•œ í˜•íƒœì˜ ì„¤ì • ì •ë³´ë¥¼ BeanDefinition ìœ¼ë¡œ ì¶”ìƒí™”í•˜ì—¬ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒ ì •ë„ë§Œ ì´í•´í•˜ë©´ ëœë‹¤.
>

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ğŸ¾ğŸ¾ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆğŸ¾ğŸ¾

# ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì‹±ê¸€í†¤

- ìŠ¤í”„ë§ : ê¸°ì—…ìš© ì˜¨ë¼ì¸ ì„œë¹„ìŠ¤ ê¸°ìˆ ì„ ì§€ì›í•˜ê¸° ìœ„í•´ íƒ„ìƒ
- ëŒ€ë¶€ë¶„ì˜ ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ â†’ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ (ì›¹ì´ ì•„ë‹Œ ì• í”Œë¦¬ì¼€ì´ì…˜ë„ ê°œë°œ ê°€ëŠ¥)
- ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ : ë³´í†µ ì—¬ëŸ¬ ê³ ê°ì´ ë™ì‹œì— ìš”ì²­

![ë™ì‹œ ìš”ì²­](img/ë™ì‹œìš”ì²­.png)

ë™ì‹œ ìš”ì²­

1. test/java/hello.core ì— singleton ì´ë¦„ì˜ Package ìƒì„±
2. ë§Œë“  singleton íŒ¨í‚¤ì§€ì— SingletonTest ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core.singleton;

import hello.core.AppConfig;
import hello.core.member.MemberService;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

public class SingletonTest {

    @Test
    @DisplayName("ìŠ¤í”„ë§ ì—†ëŠ” ìˆœìˆ˜í•œ DI ì»¨í…Œì´ë„ˆ")
    void pureContainer() {
        AppConfig appConfig = new AppConfig();

        // 1. ì¡°íšŒ : í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ê°ì²´ ìƒì„±
        MemberService memberService1 = appConfig.memberService();

        // 2. ì¡°íšŒ : í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ê°ì²´ ìƒì„±
        MemberService memberService2 = appConfig.memberService();

        // ì°¸ì¡°ê°’ì´ ë‹¤ë¥¸ ê²ƒì„ í™•ì¸
        System.out.println("memberService1 = " + memberService1);
        System.out.println("memberService2 = " + memberService2);

        // memberService1 â‰  memberService2
        Assertions.assertThat(memberService1).isNotSameAs(memberService2);
    }
}
```

- í…ŒìŠ¤íŠ¸ ê²°ê³¼

![Untitled](img/SingletonTest.png)

â†’ ì°¸ì¡°ê°’ì´ ë‹¤ë¥¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤

âœ… AppConfig (ìŠ¤í”„ë§ ì—†ëŠ” ìˆœìˆ˜í•œ DI ì»¨í…Œì´ë„ˆ) : ìš”ì²­ì„ í•  ë•Œ ë§ˆë‹¤ ê°ì²´ ìƒˆë¡œ ìƒì„± â†’ ë©”ëª¨ë¦¬ ë‚­ë¹„ê°€ ì‹¬í•¨

âœ… ì‹±ê¸€í†¤ íŒ¨í„´ : í•´ë‹¹ ê°ì²´ë¥¼ 1ê°œë§Œ ìƒì„±í•œ í›„ ê³µìœ 

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ì‹±ê¸€í†¤ íŒ¨í„´

- í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ë”± 1ê°œë§Œ ìƒì„±ë˜ëŠ” ê²ƒì„ ë³´ì¥í•˜ëŠ” ë””ìì¸ íŒ¨í„´
- private ìƒì„±ì ì‚¬ìš© (ì™¸ë¶€ì—ì„œ ì„ì˜ë¡œ new í‚¤ì›Œë“œ ì‚¬ìš© ë°©ì§€) â†’ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ 2ê°œ ì´ìƒ ìƒì„± ë°©ì§€

1. test/java/hello.core/singleton íŒ¨í‚¤ì§€ì— SingletonService ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core.singleton;

public class SingletonService {

    private static final SingletonService instance = new SingletonService();

    public static SingletonService getInstance() {
        return instance;
    }
    
    private SingletonService() {}

    public void logic() {
        System.out.println("ì‹±ê¸€í†¤ ê°ì²´ ë¡œì§ í˜¸ì¶œ");
    }
}
```

- private ìœ¼ë¡œ new í‚¤ì›Œë“œë¥¼ ë§‰ì•„ë‘ 
- í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ê°™ì€ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜

2. test/java/hello.core/singleton/SingletonTest ì— ì½”ë“œ ì¶”ê°€

```java
...

import static org.assertj.core.api.Assertions.assertThat;

public class SingletonTest {

    ...

    @Test
    @DisplayName("ì‹±ê¸€í†¤ íŒ¨í„´ì„ ì ìš©í•œ ê°ì²´ ì‚¬ìš©")
    void singletonServiceTest() {
        SingletonService singletonService1 = SingletonService.getInstance();
        SingletonService singletonService2 = SingletonService.getInstance();

        System.out.println("singletonService1 = " + singletonService1);
        System.out.println("singletonService2 = " + singletonService2);

        assertThat(singletonService1).isSameAs(singletonService2);
    }
}
```

- í…ŒìŠ¤íŠ¸ ê²°ê³¼

![Untitled](img/SingletonService.png)

â†’ ê°™ì€ ê°ì²´ê°€ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤

### ì‹±ê¸€í†¤ íŒ¨í„´ ë¬¸ì œì 

- ì‹±ê¸€í†¤ íŒ¨í„´ì„ êµ¬í˜„í•˜ëŠ” ì½”ë“œê°€ ë§ìŒ
- í´ë¼ì´ì–¸íŠ¸ê°€ êµ¬ì²´ í´ë˜ìŠ¤ì— ì˜ì¡´ â†’ DIP, OCP ìœ„ë°˜
- í…ŒìŠ¤íŠ¸ê°€ ì–´ë ¤ì›€
- ë‚´ë¶€ ì†ì„±ì„ ë³€ê²½í•˜ê±°ë‚˜ ì´ˆê¸°í™” í•˜ê¸° ì–´ë ¤ì›€
- private ìƒì„±ì â†’ ìì‹ í´ë˜ìŠ¤ ë§Œë“¤ê¸° ì–´ë ¤ì›€
- ìœ ì—°ì„±ì´ ë–¨ì–´ì§
- ì•ˆí‹°íŒ¨í„´ì´ë¼ ë¶ˆë¦¼

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì‹±ê¸€í†¤ íŒ¨í„´ì„ ì ìš©í•˜ì§€ ì•Šì•„ë„, ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹±ê¸€í†¤(1ê°œë§Œ ìƒì„±)ìœ¼ë¡œ ê´€ë¦¬
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ : ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ ì—­í• 
  - ì‹±ê¸€í†¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ : ì‹±ê¸€í†¤ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ â†’ ì‹±ê¸€í†¤ íŒ¨í„´ ë‹¨ì  í•´ê²°
  - ì‹±ê¸€í†¤ íŒ¨í„´ì„ ìœ„í•œ ì§€ì €ë¶„í•œ ì½”ë“œ X
  - DIP, OCP, í…ŒìŠ¤íŠ¸, private ìƒì„±ìë¡œë¶€í„° ììœ ë¡­ê²Œ ì‹±ê¸€í†¤ ì‚¬ìš©

1. test/java/hello.core/SingletonTest ì— ì½”ë“œ ì¶”ê°€

```java
...
public class SingletonTest {

    ...

    @Test
    @DisplayName("ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ì‹±ê¸€í†¤")
    void springContainer() {
        // AppConfig appConfig = new AppConfig();
        ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

        // 1. ì¡°íšŒ : í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ê°ì²´ ìƒì„±
        MemberService memberService1 = ac.getBean("memberService", MemberService.class);

        // 2. ì¡°íšŒ : í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ê°ì²´ ìƒì„±
        MemberService memberService2 = ac.getBean("memberService", MemberService.class);

        // ì°¸ì¡°ê°’ì´ ê°™ì€ ê²ƒì„ í™•ì¸
        System.out.println("memberService1 = " + memberService1);
        System.out.println("memberService2 = " + memberService2);

        // memberService1 = memberService2
        assertThat(memberService1).isSameAs(memberService2);
    }
}
```

- í…ŒìŠ¤íŠ¸ ê²°ê³¼

![Untitled](img/singleton_springContainer.png)

### ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ ì ìš© í›„

![Untitled](img/aftersingleton.png)

â¡ï¸ ì´ë¯¸ ë§Œë“¤ì–´ì§„ ê°ì²´ ê³µìœ  : íš¨ìœ¨ì ì¸ ì¬ì‚¬ìš©

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# â­ ì‹±ê¸€í†¤ ë°©ì‹ì˜ ì£¼ì˜ì 

- ì‹±ê¸€í†¤ ê°ì²´ëŠ” ìƒíƒœë¥¼ ìœ ì§€(stateful)í•˜ë„ë¡ ì„¤ê³„í•´ì„œëŠ” ì•ˆë¨ (ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ê°€ ê°™ì€ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³µìœ í•˜ê¸° ë•Œë¬¸)
- ë¬´ìƒíƒœ(stateless)ë¡œ ì„¤ê³„
  - íŠ¹ì • í´ë¼ì´ì–¸íŠ¸ì— ì˜ì¡´ì ì¸ í•„ë“œê°€ ìˆì–´ì„  ì•ˆë¨
  - íŠ¹ì • í´ë¼ì´ì–¸íŠ¸ê°€ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆëŠ” í•„ë“œê°€ ìˆì–´ì„  ì•ˆë¨ (ê°€ê¸‰ì  ì½ê¸°ë§Œ ê°€ëŠ¥)
  - í•„ë“œ ëŒ€ì‹  ìë°”ì—ì„œ ê³µìœ ë˜ì§€ ì•ŠëŠ” ì§€ì—­ë³€ìˆ˜, íŒŒë¼ë¯¸í„°, ThreadLocal ë“± ì‚¬ìš©
- ìŠ¤í”„ë§ ë¹ˆ í•„ë“œì— ê³µìœ  ê°’ ì„¤ì • ì‹œ ì¥ì•  ë°œìƒ ê°€ëŠ¥

## ë¬¸ì œ ìƒí™©

1. test/java/hello.core/singleton íŒ¨í‚¤ì§€ì— StatefulService ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core.singleton;

public class StatefulService {

    // ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” í•„ë“œ
    private int price;

    public void order(String name, int price) {
        System.out.println("name = " + name + "price = " + price);

        // ë¬¸ì œê°€ ë˜ëŠ” ë¶€ë¶„ !!
        this.price = price;
    }

    public int getPrice() {
        return price;
    }
}
```

2. test/java/hello.core/singleton íŒ¨í‚¤ì§€ì— StatefulServiceTest ì´ë¦„ì˜ Class ìƒì„± (Windows : Ctrl + Shift + t, Linux : Command + Shift + t)

```java
package hello.core.singleton;

import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Bean;

import static org.assertj.core.api.Assertions.assertThat;
import static org.junit.jupiter.api.Assertions.*;

class StatefulServiceTest {

    @Test
    void statefulServiceSingleton() {
        ApplicationContext ac = new AnnotationConfigApplicationContext(TestConfig.class);
        StatefulService statefulService1 = ac.getBean(StatefulService.class);
        StatefulService statefulService2 = ac.getBean(StatefulService.class);

        // Thread A : A ì‚¬ìš©ì 10000ì› ì£¼ë¬¸
        statefulService1.order("userA", 10000);

        // Thread B : B ì‚¬ìš©ì 20000ì› ì£¼ë¬¸
        statefulService2.order("userB", 20000);

        // Thread A : A ì‚¬ìš©ì ì£¼ë¬¸ ê¸ˆì•¡ ì¡°íšŒ
        int price = statefulService1.getPrice();
        System.out.println("A price = " + price);

        assertThat(statefulService1.getPrice()).isEqualTo(20000);
    }

    static class TestConfig {
        @Bean
        public StatefulService statefulService() {
            return new StatefulService();
        }
    }

}
```

- í…ŒìŠ¤íŠ¸ ê²°ê³¼

![Untitled](img/Stateful.png)

â†’ Thread A ì‚¬ìš©ìëŠ” 10000ì›ì„ ê¸°ëŒ€í–ˆì§€ë§Œ, 20000ì› ì¶œë ¥ !

â˜‘ï¸ StatefulService ì˜ price í•„ë“œëŠ” ê³µìœ  í•„ë“œì¸ë°, íŠ¹ì • í´ë¼ì´ì–¸íŠ¸ê°€ ê°’ì„ ë³€ê²½

## í•´ê²°

1. StatefulService ì½”ë“œ ë³€ê²½

```java
package hello.core.singleton;

public class StatefulService {

    // ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” í•„ë“œ
    // private int price;

    public int order(String name, int price) {
        System.out.println("name = " + name + "price = " + price);

        // ë¬¸ì œê°€ ë˜ëŠ” ë¶€ë¶„ !!
        // this.price = price;

        return price;
    }

//    public int getPrice() {
//        return price;
//    }
}
```

2. StatefulServiceTest ì½”ë“œ ë³€ê²½

```java
...

class StatefulServiceTest {

    @Test
    void statefulServiceSingleton() {
        ApplicationContext ac = new AnnotationConfigApplicationContext(TestConfig.class);
        StatefulService statefulService1 = ac.getBean(StatefulService.class);
        StatefulService statefulService2 = ac.getBean(StatefulService.class);

        // Thread A : A ì‚¬ìš©ì 10000ì› ì£¼ë¬¸
        int userAPrice = statefulService1.order("userA", 10000);

        // Thread B : B ì‚¬ìš©ì 20000ì› ì£¼ë¬¸
        int userBPrice = statefulService2.order("userB", 20000);

        // Thread A : A ì‚¬ìš©ì ì£¼ë¬¸ ê¸ˆì•¡ ì¡°íšŒ
        // int price = statefulService1.getPrice();
        System.out.println("A price = " + userAPrice);

        // assertThat(statefulService1.getPrice()).isEqualTo(20000);
    }

    ...
}
```

- í…ŒìŠ¤íŠ¸ ê²°ê³¼

![Untitled](img/Stateless.png)

â†’ í•´ê²°

âœ… ìŠ¤í”„ë§ ë¹ˆì€ í•­ìƒ ë¬´ìƒíƒœ(stateless)ë¡œ ì„¤ê³„ !!

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# @Configuration ê³¼ ì‹±ê¸€í†¤

## ì˜ë¬¸ì 

- AppConfig

```java
...

@Configuration
public class AppConfig {

    // @Bean memberService -> new MemoryMemberRepository()
    // @Bean orderService -> new MemoryMemberRepository()

    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    @Bean
    public MemoryMemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    @Bean
    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    ...
}
```

â¡ï¸ MemoryMemberRepository ê°€ 2ë²ˆ í˜¸ì¶œë˜ë©´ì„œ ì‹±ê¸€í†¤ì´ ê¹¨ì§€ëŠ” ê±´ ì•„ë‹Œê°€ ?

### í…ŒìŠ¤íŠ¸ í•´ë³´ê¸°

1. MemberServiceImpl ì— í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€

```java
...

public class MemberServiceImpl implements MemberService{

    ...

    // í…ŒìŠ¤íŠ¸ ìš©ë„
    public MemberRepository getMemberRepository() {
        return memberRepository;
    }
}
```

2. OrderServiceImpl ì— í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€

```java
...

public class OrderServiceImpl implements OrderService{

    ...

    // í…ŒìŠ¤íŠ¸ ìš©ë„
    public MemberRepository getMemberRepository() {
        return memberRepository;
    }
}
```

3. test/java/hello.core/singleton íŒ¨í‚¤ì§€ì— ConfigurationSingletonTest ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core.singleton;

import hello.core.AppConfig;
import hello.core.member.MemberRepository;
import hello.core.member.MemberServiceImpl;
import hello.core.order.OrderServiceImpl;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class ConfigurationSingletonTest {

    @Test
    void configurationTest() {
        ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

        MemberServiceImpl memberService = ac.getBean("memberService", MemberServiceImpl.class);
        OrderServiceImpl orderService = ac.getBean("orderService", OrderServiceImpl.class);
        MemberRepository memberRepository = ac.getBean("memberRepository", MemberRepository.class);

        MemberRepository memberRepository1 = memberService.getMemberRepository();
        MemberRepository memberRepository2 = orderService.getMemberRepository();

        System.out.println("memberService -> memberRepository = " + memberRepository1);
        System.out.println("orderService -> memberRepository = " + memberRepository2);
        System.out.println("memberRepository = " + memberRepository);

        Assertions.assertThat(memberService.getMemberRepository()).isSameAs(memberRepository);
        Assertions.assertThat(orderService.getMemberRepository()).isSameAs(memberRepository);
    }
}
```

- í…ŒìŠ¤íŠ¸ ê²°ê³¼

![Untitled](img/ConfigurationSingletonTest.png)

â†’ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ê°€ ì¡°íšŒëœë‹¤

### AppConfig ì—ì„œ í˜¸ì¶œ ë¡œê·¸ í™•ì¸í•˜ê¸°

```java
...
@Configuration
public class AppConfig {

    @Bean
    public MemberService memberService() {
        // soutm
        System.out.println("call AppConfig.memberService");
        return new MemberServiceImpl(memberRepository());
    }

    @Bean
    public MemoryMemberRepository memberRepository() {
        System.out.println("call AppConfig.memberRepository");
        return new MemoryMemberRepository();
    }

    @Bean
    public OrderService orderService() {
        System.out.println("call AppConfig.orderService");
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    ...
}
```

- í…ŒìŠ¤íŠ¸ ê²°ê³¼

![Untitled](img/ConfigurationSingletonTest_AppConfigLog.png)

â†’ 3ë²ˆì˜ call ë°œìƒ : memberService, memberRepository, orderService

â˜‘ï¸ ì˜ˆìƒ call í˜¸ì¶œ (ìˆœì„œëŠ” ë³´ì¥ X)

â†’ call AppConfig.memberService

â†’ call AppConfig.memberRepository

â†’ call AppConfig.memberRepository

â†’ call AppConfig.orderService

â†’ call AppConfig.memberRepository

âœ… ì‹¤ì œ call í˜¸ì¶œ

â†’ call AppConfig.memberService

â†’ call AppConfig.memberRepository

â†’ call AppConfig.orderService

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# @Configuration ê³¼ ë°”ì´íŠ¸ì½”ë“œ ì¡°ì‘ì˜ ë§ˆë²•

- ìŠ¤í”„ë§ì€ í´ë˜ìŠ¤ì˜ ë°”ì´íŠ¸ì½”ë“œë¥¼ ì¡°ì‘í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
- ë¹„ë°€ì€ @Configuration ì„ ì ìš©í•œ AppConfig ì— !!!

1. ConfigurationSingletonTest ì— ì½”ë“œ ì¶”ê°€

```java
...
public class ConfigurationSingletonTest {

    ...

    @Test
    void configurationDeep() {
        ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);
        AppConfig bean = ac.getBean(AppConfig.class);

        System.out.println("bean = " + bean.getClass());
    }
}
```

- í…ŒìŠ¤íŠ¸ ê²°ê³¼

![Untitled](img/configurationDeep.png)

â†’ ë‚´ê°€ ë§Œë“  í´ë˜ìŠ¤ê°€ ì•„ë‹ˆë¼ ìŠ¤í”„ë§ì´ CGLIB ë¼ëŠ” ë°”ì´íŠ¸ì½”ë“œ ì¡°ì‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ AppConfig í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ ì„ì˜ì˜ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³ , ê·¸ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œ ê²ƒ

### AppConfig@CGLIB

![Untitled](img/CGLIB.png)

â†’ ì„ì˜ì˜ ë‹¤ë¥¸ í´ë˜ìŠ¤ê°€ ì‹±ê¸€í†¤ì´ ë³´ì¥ë˜ë„ë¡ í•´ì¤Œ

- ì˜ˆìƒ ì½”ë“œ

```java
@Bean
public MemberRepository memberRepository() {
	if (memoryMemberRepository ê°€ ì´ë¯¸ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ë˜ì–´ ìˆìœ¼ë©´) {
		return ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ì°¾ì•„ì„œ ë°˜í™˜;
	} else { // ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì—†ìœ¼ë©´
		ê¸°ì¡´ ë¡œì§ì„ í˜¸ì¶œí•´ì„œ MemoryMemberRepository ë¥¼ ìƒì„±í•˜ê³  ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡
		return ë°˜í™˜
	}
}
```

### @Configuration ì‚­ì œí–ˆì„ ê²½ìš°

- @Configuration ì„ ì ìš©í•˜ì§€ ì•Šê³ , @Bean ë§Œ ì ìš©

1. AppConfig ì—ì„œ @Configuration ì‚­ì œ

```java
...
// @Configuration
public class AppConfig {

    ...
}
```

- í…ŒìŠ¤íŠ¸ ê²°ê³¼

![Untitled](img/configurationDeep_withoutConfiguration.png)

â†’ AppConfig ê°€ CGLIB ê¸°ìˆ  ì—†ì´ ìˆœìˆ˜í•œ AppConfig ë¡œ ìŠ¤í”„ë§ ë¹ˆì— ë“±ë¡ëœ ê²ƒì„ í™•ì¸

â˜‘ï¸ ê°ì ë‹¤ë¥¸ MemoryMemberRepository ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆë‹¤

> **ì •ë¦¬**
> - @Bean ë§Œ ì‚¬ìš©í•´ë„ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ì§€ë§Œ, ì‹±ê¸€í†¤ì€ ë³´ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤
> - í•­ìƒ @Configuration ì‚¬ìš©í•˜ê¸°
>

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ğŸ¾ğŸ¾ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ğŸ¾ğŸ¾

# ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì… ì‹œì‘í•˜ê¸°

- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” : ì„¤ì • ì •ë³´ ì—†ì´ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡
- @Autowired : ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…

1. main/java/hello.core ì— AutoAppConfig ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core;

import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.FilterType;

@Configuration
@ComponentScan(
        // AppConfig ì„¤ì • ì •ë³´ ì œì™¸í•˜ê¸°
        excludeFilters = @ComponentScan.Filter(type = FilterType.ANNOTATION, classes = Configuration.class)
)
public class AutoAppConfig { }
```

- @ComponentScan : @Component ì• ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ìŠ¤ìº”í•´ì„œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡

2. êµ¬í˜„ì²´(MemoryMemberRepository, RateDiscountPolicy, MemberServiceImp, OrderServiceImpl)ì— @Component, @Autowired ì• ë…¸í…Œì´ì…˜ ë¶™ì´ê¸°
- MemoryMemberRepository

```java
...
import org.springframework.stereotype.Component;

@Component
public class MemoryMemberRepository implements MemberRepository{

    ...
}
```

- RateDiscountPolicy

```java
...
import org.springframework.stereotype.Component;

@Component
public class RateDiscountPolicy implements DiscountPolicy{

    ...
}
```

- MemberServiceImpl

```java
...
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

@Component
public class MemberServiceImpl implements MemberService{

    ...
    @Autowired // ìë™ ì˜ì¡´ê´€ê³„ ì£¼ì…
    public MemberServiceImpl(MemberRepository memberRepository) { ... }

    ...
}
```

- OrderServiceImpl

```java
...
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

@Component
public class OrderServiceImpl implements OrderService{

    ...
    @Autowired
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) { ... }

    ...
}
```

3. test/java/hello.core ì— scan ì´ë¦„ì˜ Package ìƒì„±
4. ë§Œë“  scan íŒ¨í‚¤ì§€ì— AutoAppConfigTest ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core.scan;

import hello.core.AutoAppConfig;
import hello.core.member.MemberService;
import org.junit.jupiter.api.Test;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

import static org.assertj.core.api.Assertions.assertThat;

public class AutoAppConfigTest {

    @Test
    void basicScan() {
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AutoAppConfig.class);

        MemberService memberService = ac.getBean(MemberService.class);
        assertThat(memberService).isInstanceOf(MemberService.class);
    }
}
```

- í…ŒìŠ¤íŠ¸ ê²°ê³¼

![Untitled](img/AutoAppConfigTest.png)

â†’ ì˜ ë™ì‘í•œë‹¤

### @ComponentScan

![Untitled](img/@ComponentScan.png)

- @ComponentScan ì€ @Component ê°€ ë¶™ì€ ëª¨ë“  í´ë˜ìŠ¤ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡
- ìŠ¤í”„ë§ ë¹ˆì˜ ê¸°ë³¸ ì´ë¦„ : í´ë˜ìŠ¤ëª… - ë§¨ ì•ê¸€ìë§Œ ì†Œë¬¸ì ì‚¬ìš©
  - ex) MemberServiceImpl â†’ memberServiceImpl
  - ë¹ˆ ì´ë¦„ ì§ì ‘ ì§€ì • : @Component(â€memberService2â€)

### @Autowired

![Untitled](img/@Autowired.png)

- ìƒì„±ìì— @Autowired ì§€ì • ì‹œ, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìë™ìœ¼ë¡œ í•´ë‹¹ ìŠ¤í”„ë§ ë¹ˆ ì°¾ì€ í›„ ì£¼ì…
- ê¸°ë³¸ ì¡°íšŒ ì „ëµ : íƒ€ì…ì´ ê°™ì€ ë¹ˆì„ ì°¾ì•„ ì£¼ì…

![Untitled](img/@Autowired2.png)

- ìƒì„±ìì— íŒŒë¼ë¯¸í„°ê°€ ë§ì•„ë„ ìë™ ì£¼ì…

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# íƒìƒ‰ ìœ„ì¹˜ì™€ ê¸°ë³¸ ìŠ¤ìº” ëŒ€ìƒ

## íƒìƒ‰í•  íŒ¨í‚¤ì§€ì˜ ì‹œì‘ ìœ„ì¹˜ ì§€ì •

- AutoAppConfig

```java
...
@Configuration
@ComponentScan(
        // íƒìƒ‰í•  íŒ¨í‚¤ì§€ ì‹œì‘ ìœ„ì¹˜ ì§€ì •í•˜ê¸°
        basePackages = "hello.core.member",
        // ì§€ì •í•œ í´ë˜ìŠ¤ì˜ íŒ¨í‚¤ì§€ë¥¼ íƒìƒ‰ ì‹œì‘ ìœ„ì¹˜ë¡œ ì§€ì •í•˜ê¸°
        basePackageClasses = AutoAppConfig.class,
        ...
)
public class AutoAppConfig { }
```

â†’ basePackages : íƒìƒ‰í•  íŒ¨í‚¤ì§€ì˜ ì‹œì‘ ìœ„ì¹˜ ì§€ì •, í•˜ìœ„ íŒ¨í‚¤ì§€ ëª¨ë‘ íƒìƒ‰

â†’ basePackageClasses : ì§€ì •í•˜ì§€ ì•Šì„ ì‹œ @ComponentScan ì´ ë¶™ì€ ì„¤ì • ì •ë³´ í´ë˜ìŠ¤ì˜ íŒ¨í‚¤ì§€ê°€ ì‹œì‘ ìœ„ì¹˜

> âœ… **ê¶Œì¥í•˜ëŠ” ë°©ë²•**
>
> íŒ¨í‚¤ì§€ ìœ„ì¹˜ë¥¼ ì§€ì •í•˜ì§€ ì•Šê³ , ì„¤ì • ì •ë³´ í´ë˜ìŠ¤ì˜ ìœ„ì¹˜ë¥¼ í”„ë¡œì íŠ¸ ìµœìƒë‹¨ì— ë‘ëŠ” ê²ƒ (ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ë°©ë²•)
>

### ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ê¸°ë³¸ ëŒ€ìƒ

- @Component : ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì—ì„œ ì‚¬ìš©
- @Controller : ìŠ¤í”„ë§ MVC ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì‚¬ìš©
- @Service : ìŠ¤í”„ë§ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ì„œ ì‚¬ìš© â†’ ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì¸µ ì¸ì‹
- @Repository : ìŠ¤í”„ë§ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µì—ì„œ ì‚¬ìš© â†’ë°ì´í„° ê³„ì¸µì˜ ì˜ˆì™¸ë¥¼ ìŠ¤í”„ë§ ì˜ˆì™¸ë¡œ ë³€í™˜
- @Configuration : ìŠ¤í”„ë§ ì„¤ì • ì •ë³´ì—ì„œ ì‚¬ìš© â†’ ìŠ¤í”„ë§ ë¹ˆì´ ì‹±ê¸€í†¤ì„ ìœ ì§€í•˜ë„ë¡ ì¶”ê°€ ì²˜ë¦¬

> â­ **ì°¸ê³  â­**
>
> ì• ë…¸í…Œì´ì…˜ì—ëŠ” ìƒì†ê´€ê³„ë¼ëŠ” ê²ƒì´ ì—†ë‹¤. ì• ë…¸í…Œì´ì…˜ì´ íŠ¹ì • ì• ë…¸í…Œì´ì…˜ì„ ë“¤ê³  ìˆëŠ” ê²ƒì„ ì¸ì‹í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ìë°” ì–¸ì–´ê°€ ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ì€ ì•„ë‹ˆê³ , ìŠ¤í”„ë§ì´ ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.
>

> **ì°¸ê³ **
>
> useDefaultFilters ì˜µì…˜ì€ ê¸°ë³¸ìœ¼ë¡œ ì¼œì ¸ìˆëŠ”ë°, ì´ ì˜µì…˜ì„ ë„ë©´ ê¸°ë³¸ ìŠ¤ìº” ëŒ€ìƒë“¤ì´ ì œì™¸ëœë‹¤.
>

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# í•„í„°

- includeFilters : ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì„ ì¶”ê°€ë¡œ ì§€ì •
- excludeFilters : ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì—ì„œ ì œì™¸í•  ëŒ€ìƒ ì§€ì •

1. test/java/hello.core/scan ì— filter ì´ë¦„ì˜ Package ìƒì„±
2. ë§Œë“  filter íŒ¨í‚¤ì§€ì— MyIncludeComponent ì´ë¦„ì˜ Annotation ìƒì„±

```java
package hello.core.scan.filter;

import java.lang.annotation.*;

@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface MyIncludeComponent { }
```

â†’ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì— ì¶”ê°€í•  ì• ë…¸í…Œì´ì…˜

3. filter íŒ¨í‚¤ì§€ì— MyExcludeComponent ì´ë¦„ì˜ Annotation ìƒì„±

```java
package hello.core.scan.filter;

import java.lang.annotation.*;

@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface MyExcludeComponent { }
```

â†’ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì—ì„œ ì œì™¸í•  ì• ë…¸í…Œì´ì…˜

4. filter íŒ¨í‚¤ì§€ì— BeanA, BeanB ì´ë¦„ì˜ Class ìƒì„±
- BeanA

```java
package hello.core.scan.filter;

@MyIncludeComponent
public class BeanA { }
```

â†’ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì— ì¶”ê°€í•  í´ë˜ìŠ¤ (@MyIncludeComponent ì ìš©)

- BeanB

```java
package hello.core.scan.filter;

@MyExcludeComponent // ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì—ì„œ ì œì™¸
public class BeanB { }
```

â†’ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì—ì„œ ì œì™¸í•  í´ë˜ìŠ¤ (@MyExcludeComponent ì ìš©)

5. filter íŒ¨í‚¤ì§€ì— ComponentFilterAppConfigTest ì´ë¦„ì˜ Class ìƒì„±

```java
package hello.core.scan.filter;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.NoSuchBeanDefinitionException;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.FilterType;

import static org.assertj.core.api.Assertions.assertThat;
import static org.junit.jupiter.api.Assertions.assertThrows;

public class ComponentFilterAppConfigTest {

    @Test
    void filterScan() {
        ApplicationContext ac = new AnnotationConfigApplicationContext(ComponentFilterAppConfig.class);
        BeanA beanA = ac.getBean("beanA", BeanA.class);
        assertThat(beanA).isNotNull();

        assertThrows(
                NoSuchBeanDefinitionException.class,
                () -> ac.getBean("beanB", BeanB.class)
        );
    }

    @Configuration
    @ComponentScan(
            includeFilters = @ComponentScan.Filter(type = FilterType.ANNOTATION, classes = MyIncludeComponent.class),
            excludeFilters = @ComponentScan.Filter(type = FilterType.ANNOTATION, classes = MyExcludeComponent.class)
    )
    static class ComponentFilterAppConfig {}
}
```

â¡ï¸ includeFilters ì— MyIncludeComponent ì• ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•´ì„œ BeanA ê°€ ìŠ¤í”„ë§ ë¹ˆì— ë“±ë¡ë¨

â¡ï¸ excludeFilters ì— MyExcludeComponent ì• ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•´ì„œ BeanB ëŠ” ìŠ¤í”„ë§ ë¹ˆì— ë“±ë¡ë˜ì§€ ì•ŠìŒ

- í…ŒìŠ¤íŠ¸ ê²°ê³¼

![Untitled](img/ComponentFilterAppConfigTest.png)

â†’ ì„±ê³µ !

### FilterType ì˜µì…˜

- ANNOTATION : ê¸°ë³¸ê°’, ì• ë…¸í…Œì´ì…˜ì„ ì¸ì‹í•´ì„œ ë™ì‘ (ìƒëµ ê°€ëŠ¥)
- ASSIGNABLE_TYPE : ì§€ì •í•œ íƒ€ì…ê³¼ ìì‹ íƒ€ì…ì„ ì¸ì‹í•´ì„œ ë™ì‘
- ASPECT J : AspectJ íŒ¨í„´ ì‚¬ìš©
- REGEX : ì •ê·œ í‘œí˜„ì‹
- CUSTOM : TypeFilter ì´ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„í•´ì„œ ì²˜ë¦¬

> **ì°¸ê³ **
>
> @Component ë©´ ì¶©ë¶„í•˜ê¸° ë•Œë¬¸ì—, includeFilters ë¥¼ ì‚¬ìš©í•  ì¼ì€ ê±°ì˜ ì—†ë‹¤. excludeFilters ëŠ” ê°„í˜¹ ì‚¬ìš©í•˜ì§€ë§Œ ë§ì§€ëŠ” ì•Šë‹¤. ìµœê·¼ ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ”ë°, ì˜µì…˜ì„ ë³€ê²½í•˜ë©´ì„œ ì‚¬ìš©í•˜ê¸°ë³´ë‹¨ ìŠ¤í”„ë§ì˜ ê¸°ë³¸ ì„¤ì •ì— ë§ì¶”ì–´ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.
>

<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>

# ì¤‘ë³µ ë“±ë¡ê³¼ ì¶©ëŒ

- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì—ì„œ ê°™ì€ ë¹ˆ ì´ë¦„ì„ ë“±ë¡í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?
  - ìë™ ë¹ˆ ë“±ë¡ vs. ìë™ ë¹ˆ ë“±ë¡
  - ìˆ˜ë™ ë¹ˆ ë“±ë¡ vs. ìë™ ë¹ˆ ë“±ë¡

## ìë™ ë¹ˆ ë“±ë¡ vs. ìë™ ë¹ˆ ë“±ë¡

- ConflictingBeanDefinitionException ì˜ˆì™¸ ë°œìƒ

## ìˆ˜ë™ ë¹ˆ ë“±ë¡ vs. ìë™ ë¹ˆ ë“±ë¡

- ìˆ˜ë™ ë¹ˆ ë“±ë¡ì´ ìš°ì„ ê¶Œì„ ê°€ì§ â†’ ìˆ˜ë™ ë¹ˆì´ ìë™ ë¹ˆì„ ì˜¤ë²„ë¼ì´ë”©
- ìµœê·¼ ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” ìˆ˜ë™ ë¹ˆ ë“±ë¡ê³¼ ìë™ ë¹ˆ ë“±ë¡ì´ ì¶©ëŒë‚˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë„ë¡ ê¸°ë³¸ ê°’ì„ ë°”ê¿ˆ


<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>




<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>



<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>



<!------------------------------------------------------------>
<!------------------------------------------------------------>
<!------------------------------------------------------------>
